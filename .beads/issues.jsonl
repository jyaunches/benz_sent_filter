{"id":"benz_sent_filter-017a","content_hash":"31f867760656cfec8ecd8476ea2bdee7f69078d46e5f3bde712d3242ca6cb864","title":"Add API endpoint logging","description":"8 of 9 API endpoints have NO logging. Add request/response logging to all endpoints in api/app.py: /classify, /classify/batch, /routine-operations, /company-relevance, /company-relevance/batch, /detect-quantitative-catalyst, /detect-strategic-catalyst, /health. Log request params, response status, and timing.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T19:17:18.644074-05:00","updated_at":"2025-12-11T19:17:18.644074-05:00","labels":["api","logging"]}
{"id":"benz_sent_filter-0619","content_hash":"49e0ddd50959ff14c2daa434a769415fde26b7bdebd06d8f8185635cbe63c80d","title":"Phase 3: Data Models and Response Structure","description":"Define Pydantic request/response models following benz_sent_filter conventions. Ensure clean API contract for downstream integration.","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-19T15:24:14.043754-05:00","updated_at":"2025-11-19T15:43:30.631281-05:00","closed_at":"2025-11-19T15:43:30.631281-05:00","dependencies":[{"issue_id":"benz_sent_filter-0619","depends_on_id":"benz_sent_filter-e921","type":"blocks","created_at":"2025-11-19T15:24:24.004283-05:00","created_by":"jyaunches"},{"issue_id":"benz_sent_filter-0619","depends_on_id":"benz_sent_filter-b258","type":"parent-child","created_at":"2025-11-19T15:24:36.504893-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-0742","content_hash":"a3a842ff1053db21134de052582ca7beae5ad6dcdbf9712b82e059889a3a4cb0","title":"Validation - check-work","description":"Run tests, validate acceptance criteria, and verify all phases are complete.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-20T22:39:17.180156-05:00","updated_at":"2025-11-20T23:31:54.373696-05:00","closed_at":"2025-11-20T23:31:54.373696-05:00","dependencies":[{"issue_id":"benz_sent_filter-0742","depends_on_id":"benz_sent_filter-ae65","type":"blocks","created_at":"2025-11-20T22:39:17.183161-05:00","created_by":"jyaunches"},{"issue_id":"benz_sent_filter-0742","depends_on_id":"benz_sent_filter-9e1b","type":"blocks","created_at":"2025-11-20T22:39:23.689516-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-075c","content_hash":"7d91977ad834616bca69d1554e81017bc61cc065def7a0aac7eb75feb2a09c5e","title":"ROUTINE_OPERATION filter became less strict after benz_analyzer consolidation, causing 85-article regression","description":"After benz_analyzer consolidated RoutineOperationFilter into HeadlineClassificationFilter (commit 76b6fc2), the routine operation detection became less strict, allowing 85 more low-quality articles through the pipeline.\n\n**Evidence from Evaluation Comparison:**\n\nBaseline Run: 2025-11-18_23-39 (before IMPL-013)\n- ROUTINE_OPERATION filtered: 458 articles\n- Overall accuracy: 55.21%\n- Evaluated articles: 261\n\nCurrent Run: 2025-11-20_00-05 (after IMPL-013)  \n- ROUTINE_OPERATION filtered: 373 articles\n- Overall accuracy: 53.04% (-2.17%)\n- Evaluated articles: 296\n\n**Delta Analysis:**\n- ROUTINE_OPERATION let through: +85 articles (458 → 373)\n- WARNING_THRESHOLD blocked: 47 articles (new filter from IMPL-013)\n- Net new evaluated: +37 articles\n- Result: ALL false categories increased (FP +37%, FN +130%, FN +21.5%)\n\n**Root Cause Hypothesis:**\n\nThe benz_analyzer consolidation (commits 76b6fc2 + a93d1c7) moved routine operation detection into HeadlineClassificationFilter. During this refactoring:\n\n1. The routine detection logic may have become less aggressive\n2. Materiality thresholds may have changed\n3. The per-ticker evaluation logic may have bugs\n4. API schema changes (commit b8acce0) may have affected classification\n\n**Expected Behavior:**\n- ROUTINE_OPERATION filter should maintain same strictness as pre-consolidation\n- ~458 articles should be filtered (same as baseline)\n- Articles like standard earnings reports, regular dividends, stock splits should be caught\n\n**Actual Behavior:**\n- Only 373 articles filtered (-85 from expected)\n- 85 routine operation articles are reaching LLM evaluation\n- These articles have poor prediction quality (increasing all false categories)\n\n**Impact:**\n- Evaluation accuracy dropped 2.17% (55.21% → 53.04%)\n- False Positives increased 37% (27 → 37)\n- False Negatives increased 130% (10 → 23)  \n- False Neutrals increased 21.5% (79 → 96)\n- Wasted LLM API costs on routine articles that should be pre-filtered\n\n**Related Commits (benz_analyzer):**\n- 76b6fc2: Removed RoutineOperationFilter (Nov 18, 3:42 PM)\n- a93d1c7: Added routine operation logic to HeadlineClassificationFilter\n- b8acce0: Fixed routine operations endpoint schema\n- 4521cdc: Added materiality assessment to prompts\n\n**Investigation Needed:**\n1. Compare pre-consolidation vs post-consolidation routine detection logic\n2. Identify which 85 articles were routine in baseline but not in current\n3. Check if materiality thresholds changed during consolidation\n4. Validate API schema compatibility with benz_analyzer expectations","acceptance_criteria":"- ROUTINE_OPERATION filter blocks same number of articles as pre-consolidation (~458)\n- Evaluation accuracy returns to baseline levels (55%+)\n- False Positive/Negative/Neutral rates return to baseline\n- Regression test added to prevent future loosening of routine detection\n- Documentation updated with materiality threshold definitions","notes":"**Investigation Update:**\n\nCross-repo analysis confirms that benz_sent_filter's routine detection logic is identical between baseline and current runs. Both `/classify` and `/routine-operations` endpoints call the same backend method `_analyze_routine_operation(headline, company_symbol)`.\n\n**Key Finding:**\nThe regression is NOT caused by benz_sent_filter code changes. The issue is in how benz_analyzer's HeadlineClassificationFilter (post-consolidation) uses the API differently than the old RoutineOperationFilter.\n\n**Verified Facts:**\n- benz_sent_filter code unchanged between evaluations\n- Both endpoints use identical routine detection logic (classifier.py:222, 339)\n- Both call `_analyze_routine_operation(headline, company_symbol=ticker)`\n- Backend routine_detector_mnls.py uses same thresholds and decision logic\n\n**Recommended Investigation (in benz_analyzer):**\n1. Compare ticker symbols passed before vs after consolidation\n2. Check if headline pre-filtering changed\n3. Verify response parsing - old vs new code may check different fields\n4. Sample the 85 articles to identify patterns (which tickers, what confidence scores)\n5. Validate that old behavior (458 filtered) was actually correct\n\n**Potential benz_analyzer Issues:**\n- HeadlineClassificationFilter may be passing wrong ticker symbols\n- May be checking wrong response fields (routine_operation vs routine_confidence)\n- May have changed threshold logic for what counts as \"routine\"\n- May be missing company_symbol parameter in API calls","status":"open","priority":1,"issue_type":"bug","created_at":"2025-11-20T16:10:58.824594-05:00","updated_at":"2025-11-20T16:45:33.679702-05:00","labels":["bug","cross-repo","evaluation-accuracy","filter-logic","regression"]}
{"id":"benz_sent_filter-0db8","content_hash":"42def5b79dc42c20dc71aca93294482f11232ba2a6d4e2f083b63ddccedbfefb","title":"Add logging to StrategicCatalystDetectorMNLS","description":"strategic_catalyst_detector_mnls.py (232 lines) has ZERO logging. Add logging for: presence detection, type classification, pre-filter logic execution, confidence scores, detection results.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T19:17:18.339804-05:00","updated_at":"2025-12-11T19:17:18.339804-05:00","labels":["business-logic","critical-gap","logging"]}
{"id":"benz_sent_filter-0e52","content_hash":"f300cc6c01c7d5ca21ad61121507bafbea4d58f906ca0de3fe0ef228a4b69a30","title":"Phase 1: Core Detector Service with MNLI Presence Detection","description":"Create foundational detector service with MNLI-based presence detection and regex value extraction. Establishes core detection capability without type classification.","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-19T15:24:13.700916-05:00","updated_at":"2025-11-19T15:43:30.404594-05:00","closed_at":"2025-11-19T15:43:30.404594-05:00","dependencies":[{"issue_id":"benz_sent_filter-0e52","depends_on_id":"benz_sent_filter-b258","type":"parent-child","created_at":"2025-11-19T15:24:36.311676-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-1412","content_hash":"19d47162b2d1a818a5f9a2572f96964b3222b242c952e5512892d8174de39af9","title":"Phase 1: Extend Request/Response Models","description":"Add optional company parameter to request models and company relevance fields to response models","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T14:52:45.994886-05:00","updated_at":"2025-11-17T14:55:46.60635-05:00","closed_at":"2025-11-17T14:55:46.60635-05:00"}
{"id":"benz_sent_filter-1423","content_hash":"b306fe78c033f4d5f60148558f29712efcb58ad3a9657496a8da5aaa61c97b72","title":"Validation - check-work","description":"Run tests and validate acceptance criteria for all phases","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-17T18:08:56.380669-05:00","updated_at":"2025-11-17T18:08:56.380669-05:00","dependencies":[{"issue_id":"benz_sent_filter-1423","depends_on_id":"benz_sent_filter-b5ae","type":"blocks","created_at":"2025-11-17T18:09:04.500278-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-1754","content_hash":"f029f467c119ab04703d80f09e6f912e16b4cb8072353c38f50c0639e3492349","title":"Add routine business operations filter to detect immaterial process announcements","description":"Implement filter to detect articles about routine business operations, process announcements, or transactions that may be numerically large but financially immaterial for the company's scale.\n\nContext from benz_evaluator analysis:\n- FNMA: \"Fannie Mae Begins Marketing Its Most Recent Sale Of Reperforming Loans; Sale Consists Of ~ 3,058 Loans, Having An Unpaid Principal Balance Of ~ $560.5M, And Is Available For Purchase By Qualified Bidders\"\n- This is a routine transaction for Fannie Mae - they regularly sell loan portfolios\n- $560.5M sounds impressive but may be immaterial for Fannie Mae's scale\n- \"Begins marketing\" indicates early stage process, not completed transaction\n- Article describes normal business operations without material impact\n\nPattern: Articles with process language (\"begins\", \"marketing\", \"available for\"), routine transaction descriptions, or numbers that seem large in absolute terms but are immaterial relative to company size/regular operations.\n\nKey difference from vanity metrics: These ARE financial numbers, but they describe routine operations rather than exceptional events.","design":"## Detection Strategy\n\n### Routine Operation Indicators\n\n**Process Language (not outcomes)**:\n- \"begins marketing\", \"available for purchase\", \"opens bidding\"\n- \"announces offering\", \"launches sale process\", \"seeks bids\"\n- \"files to\", \"plans to\", \"intends to\"\n- \"exploring options\", \"considering\", \"evaluating\"\n\n**Routine Transaction Types**:\n- Loan portfolio sales (for financial institutions)\n- Share buyback programs (regular, ongoing)\n- Dividend declarations (scheduled)\n- Debt refinancing (routine treasury operations)\n- Asset sales in normal course\n- \"enters into agreement\" (vs \"announces major acquisition\")\n\n**Frequency Indicators**:\n- \"most recent\", \"latest\", \"another\", \"continues\"\n- \"quarterly\", \"regular\", \"ongoing program\"\n- \"as part of\", \"in line with\"\n\n**Early Stage Process**:\n- \"begins\", \"starts\", \"initiates\", \"commences\"\n- \"expected to close\", \"subject to approval\"\n- \"qualified bidders\", \"invitation to bid\"\n\n### Materiality Assessment\n\n**Relative size check** (requires company context):\n- Compare transaction size to:\n  - Market cap (transaction \u003c 1% of market cap = likely immaterial)\n  - Annual revenue (transaction \u003c 5% of revenue = likely routine)\n  - Total assets (for financials: sale \u003c 0.5% of assets = routine)\n\n**Examples by sector**:\n- Fannie Mae total assets ~$4T → $560M sale = 0.014% (routine)\n- Small cap ($500M market cap) → $50M transaction = 10% (material)\n\n### Filter Logic\n\n```python\ndef analyze_routine_operations(title, summary, company_context):\n    routine_score = 0\n    materiality_score = 0\n    \n    # Check for routine indicators\n    if matches_process_language(title):\n        routine_score += 2\n    if matches_frequency_indicators(title, summary):\n        routine_score += 1\n    if matches_routine_transaction_type(title, company_context.industry):\n        routine_score += 1\n    \n    # Check materiality\n    transaction_value = extract_dollar_amount(title, summary)\n    if transaction_value and company_context:\n        pct_of_market_cap = transaction_value / company_context.market_cap\n        pct_of_revenue = transaction_value / company_context.annual_revenue\n        \n        if pct_of_market_cap \u003c 0.01 or pct_of_revenue \u003c 0.05:\n            materiality_score = -2  # immaterial\n        elif pct_of_market_cap \u003c 0.05 or pct_of_revenue \u003c 0.10:\n            materiality_score = -1  # borderline\n    \n    # Decision\n    if routine_score \u003e= 2 and materiality_score \u003c= -1:\n        return FilterResult(\n            flag=\"routine_operation_immaterial\",\n            action=\"flag_for_review\",\n            reason=\"Article describes routine business process with immaterial financial impact\",\n            confidence_adjustment=0.3,\n            metadata={\n                \"routine_score\": routine_score,\n                \"materiality_score\": materiality_score,\n                \"transaction_size\": transaction_value\n            }\n        )\n```\n\n### Examples to Catch\n\n✓ \"Fannie Mae Begins Marketing Its Most Recent Sale Of Reperforming Loans... $560.5M\"\n✓ \"Bank Of America Announces Another $5B Share Buyback Program\" (if part of ongoing program)\n✓ \"Company Files To Sell $100M In Bonds\" (routine refinancing)\n✓ \"XYZ Corp Continues Quarterly Dividend Of $0.50/Share\"\n✓ \"ABC Opens Bidding Process For Manufacturing Facility Sale\"\n\n### Examples to Pass\n\n✗ \"Company Announces $2B Acquisition Of Competitor\" (major transaction)\n✗ \"Fannie Mae Completes Record $50B Loan Sale\" (completed + exceptional size)\n✗ \"Board Approves Special $5/Share Dividend\" (special, not routine)\n✗ \"Company Wins $500M Government Contract\" (new revenue, not routine operation)\n\n## Implementation Approach\n\nAdd as **research question** in benz_sent_filter:\n\n**Question**: \"Does this article describe a routine business operation or process announcement without material financial impact?\"\n\n**Sub-questions for context**:\n1. \"Is this describing a process rather than a completed transaction?\"\n2. \"Is this a regular/recurring type of transaction for this company?\"\n3. \"Is the financial amount material relative to company size?\"\n\n**If Yes (routine + immaterial)**: \n- Flag: `routine_operation: true`\n- Metadata: `{\"process_stage\": \"early\", \"materiality\": \"low\"}`\n- Recommendation: \"Low priority - routine business operation\"\n\n## Edge Cases\n\n- **Large absolute numbers**: $500M sounds big but may be immaterial for large companies\n- **Completed vs. process**: \"Completes sale\" \u003e \"Begins marketing\"\n- **Exceptional vs. routine**: \"Record\" or \"largest ever\" should NOT trigger\n- **Industry context**: Loan sales routine for Fannie Mae, but exceptional for most companies\n- **Special vs. regular**: Special dividends are material, regular dividends are routine","acceptance_criteria":"- Filter detects process language + routine operations with 85%+ accuracy\n- FNMA-type articles (routine loan portfolio sales) are flagged correctly\n- Major transactions (acquisitions, large contracts) do NOT trigger filter\n- Completed transactions with material impact do NOT trigger\n- Filter considers relative materiality (transaction size vs company size)\n- Reduces false positives on routine operations by 50%+\n- Works across industries (financial services, tech, manufacturing)","status":"open","priority":2,"issue_type":"feature","assignee":"claude","created_at":"2025-11-17T17:11:01.783539-05:00","updated_at":"2025-11-17T17:11:01.783539-05:00"}
{"id":"benz_sent_filter-19aa","content_hash":"2f51715e5c7d27e3eaefd20cd1ca374989b9c278594b8c68b633e6924c3d4e92","title":"Phase 4: API Endpoints","description":"Create FastAPI endpoints for single and batch classification","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T21:50:38.48696-05:00","updated_at":"2025-11-16T22:02:42.885257-05:00","closed_at":"2025-11-16T22:02:42.885257-05:00","dependencies":[{"issue_id":"benz_sent_filter-19aa","depends_on_id":"benz_sent_filter-48d6","type":"blocks","created_at":"2025-11-16T21:50:50.122803-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-20cc","content_hash":"bd51e52de707156b552e6b0af4095e9cda0f2cbb27537a5537cae3efb2bbec4b","title":"URGENT: Classification model defaulting all catalysts to \"product_launch\" - 5% accuracy regression","description":"## Critical Regression\n\n**Severity**: URGENT - Recent fix caused 5% accuracy regression\n**Related**: benz_sent_filter-edb5 (classification accuracy issues)\n\n## Problem\n\nAfter deploying the classification accuracy fix, the model is now defaulting **ALL strategic catalysts to \"product_launch\"** subtype, regardless of actual catalyst type. This causes wrong prompt guidance to be applied, making predictions worse than before the fix.\n\n## Evidence from Latest Evaluation\n\n**Run ID**: `2025-11-21_11-55_RUN_IMPL-016-TEST_during_move_pattern_failures`\n\n### All Strategic Catalysts Misclassified as \"product_launch\"\n\n| Article | Actual Catalyst Type | Detected Subtype | Confidence | Expected Subtype |\n|---------|---------------------|------------------|------------|------------------|\n| WKHS | M\u0026A merger agreement | product_launch ❌ | 97% | m\u0026a |\n| SHCO | Executive changes (CEO stepping down) | product_launch ❌ | High | executive_changes |\n| OPEN | CEO transition | product_launch ❌ | High | executive_changes |\n| WDAY | Earnings report | product_launch ❌ | High | (should be quantitative) |\n| IMG | Partnership MoU | product_launch ❌ | High | partnership |\n\n**100% of detected strategic catalysts have wrong subtype!**\n\n## Impact on Predictions\n\nAll 5 strategic catalyst cases received wrong guidance:\n- **WKHS** (M\u0026A): Gets \"product_launch\" guidance about \"DEPLOYED product\" → predicts NEUTRAL (expected POSITIVE for +24.3% move)\n- **SHCO** (executive): Gets \"product_launch\" guidance → predicts NEUTRAL (expected POSITIVE for +16.2% move)\n- **OPEN** (executive): Gets \"product_launch\" guidance → predicts NEGATIVE (move was +16.1%, wrong direction)\n- **IMG** (partnership): Gets \"product_launch\" guidance → predicts NEUTRAL (expected POSITIVE for +12.3% move)\n- **WDAY** (earnings): Gets \"product_launch\" guidance → predicts NEUTRAL (move was -7.1%, acceptable but wrong reasoning)\n\n**Result**: 5/5 strategic catalyst cases = 0% correct directional predictions\n\n## Accuracy Regression\n\n| Metric | Before Fix (10:37 run) | After Fix (11:55 run) | Change |\n|--------|------------------------|----------------------|--------|\n| Overall Accuracy | 81.2% | **76.5%** | **-4.7%** ⬇️ |\n| True Positive | 4 | 1 | -3 ⬇️ |\n| True Neutral | 7 | **11** | +4 ⬇️ |\n| Positive Predictions | 4 | 4 | 0 |\n| Negative Predictions | 7 | 7 | 0 |\n| Neutral Predictions | 7 | **11** | +4 ⬇️ |\n\n**System got worse after the fix attempt!**\n\n## Additional Issues\n\n### 1. Detection Recall Still Low\nStrategic catalysts NOT detected (fell back to pattern recipes):\n- NEHC (corporate restructuring)\n- SMX (product launch)\n- CTXR (product launch with milestone)\n- PSTV (clinical trial)\n- XFOR (executive changes)\n\n### 2. Pattern Recipe Fallback\n6 cases using `potential_sell_the_fact` recipe because catalyst not detected:\n- These should be strategic catalysts but weren't detected at all\n\n## Root Cause Hypothesis\n\nThe classification fix may have:\n1. **Set \"product_launch\" as default fallback**: When model uncertain, returns \"product_launch\" instead of correct type or null\n2. **Broken multi-class classification**: Model may no longer distinguish between catalyst types\n3. **Threshold issues**: May be detecting catalyst presence but failing to classify type accurately\n\n## Comparison with Previous Run\n\n**Previous run (10:37)** had these issues BUT better accuracy:\n- \"mixed\" subtype for OPEN (wrong but not catastrophic)\n- WOW misclassified as \"product_launch\" (should be quantitative)\n- WDAY misclassified as \"partnership\"\n- **BUT**: Other subtypes were correctly detected (m\u0026a, executive_changes, partnership in some cases)\n\n**Current run (11:55)** has WORSE issues:\n- **ALL** strategic catalysts → \"product_launch\"\n- Even fewer strategic catalysts detected (6 missed vs. previous)\n- 5% accuracy drop\n\n## Recommended Actions\n\n### Option 1: Revert Recent Changes (FASTEST)\n- Revert to previous classification model/code\n- Previous run (10:37) was 81.2% accurate despite \"mixed\" subtype issue\n- Can fix \"mixed\" issue separately without breaking everything else\n\n### Option 2: Debug Classification Model (IF TIME PERMITS)\n- Check if \"product_launch\" is hardcoded as default\n- Verify multi-class classification still working\n- Check confidence thresholds per subtype\n- Add logging to see what model is actually predicting before any post-processing\n\n### Option 3: Hybrid Approach\n- Revert classification model to previous version\n- Keep the response format fixes (catalyst_subtype field population)\n- Iterate on classification accuracy separately\n\n## Test Cases for Verification\n\nAfter fix, verify these headlines return CORRECT subtypes:\n\n```python\n# Should return \"m\u0026a\"\n\"Workhorse Group Announces Merger Agreement With Strategic Acquirer\"\n\n# Should return \"executive_changes\"  \n\"Soho House \u0026 Co CEO Andrew Carnie To Step Down\"\n\"Opendoor Announces CEO Carrie Wheeler Will Step Down\"\n\n# Should return \"partnership\"\n\"Imagine AR Inks Non-Binding MoU With Industrial Partner\"\n\n# Should return \"product_launch\"\n\"SMX Launches Global Plastics Passport To Track Plastic Materials\"\n\n# Should return null/false (quantitative)\n\"WOW! Stock Rockets As DigitalBridge Strikes $1.5 Billion Deal\"\n\"Workday Reports Q3 Earnings Beat Analyst Expectations\"\n```\n\n## Acceptance Criteria\n\n- [ ] Strategic catalyst subtypes distributed across multiple types (not 100% \"product_launch\")\n- [ ] WKHS (M\u0026A) returns `catalyst_subtype=\"m\u0026a\"` (not \"product_launch\")\n- [ ] SHCO (executive) returns `catalyst_subtype=\"executive_changes\"`\n- [ ] IMG (partnership) returns `catalyst_subtype=\"partnership\"`\n- [ ] Overall accuracy improves back to at least 81% (previous level)\n- [ ] No more than 7 True Neutrals (ideally fewer)\n- [ ] At least 4 True Positives (match previous performance)\n\n## Priority Justification\n\n**P1 (URGENT)** because:\n1. Recent deploy caused measurable regression (-5% accuracy)\n2. Blocking all strategic catalyst improvements (0% success rate)\n3. System was better BEFORE the fix (revert is viable path)\n4. Each evaluation run costs time and resources","notes":"## False Negative Examples (Should Be Detected But Aren't)\n\nThe following headlines should trigger strategic catalyst detection but currently return `has_strategic_catalyst=false`:\n\n### NEHC - Corporate Restructuring\n```\nTitle: \"New Era Helium Changes Name To New Era Energy \u0026 Digital; To Trade Under New Ticker 'NUAI'\"\nCurrent: has_strategic_catalyst=false ❌\nExpected: has_strategic_catalyst=true, catalyst_subtype=\"corporate_restructuring\"\nImpact: Falls back to potential_sell_the_fact recipe\nActual move: +22.7%\n```\n\n### MURA - M\u0026A Acquisition  \n```\nTitle: \"Mural Oncology To be Acquired By Xoma Royalty Subsidiary, XRA 5, For between $2.035 And $2.24 In Cash Per Share\"\nCurrent: has_strategic_catalyst=false ❌\nExpected: Should detect as QUANTITATIVE (has price per share), not strategic\nImpact: Falls back to quantitative_catalyst recipe (actually correct!)\nActual move: +16.1%\nNote: This one should be quantitative, not strategic - has explicit per-share price\n```\n\n### XFOR - Executive Changes (3 C-suite changes!)\n```\nTitle: \"X4 Pharmaceuticals' President And CEO Paula Ragan And CFO Adam Mostafa Have Stepped Down From Their Respective Roles, X4 Board Of Directors Has Appointed Adam Craig, As Executive Chair, John Volpone As President, And David Kirske As CFO Effectively Immediately\"\nCurrent: has_strategic_catalyst=false ❌\nExpected: has_strategic_catalyst=true, catalyst_subtype=\"executive_changes\"\nImpact: Falls back to minimal_movement_at_reference recipe\nActual move: +85.9% (HUGE move, should have been detected!)\nNote: Multiple C-suite changes in one announcement - very significant catalyst\n```\n\n### SMX - Product Launch\n```\nTitle: \"SMX Launches Global Plastics Passport to Track and Monetize All Plastics, Offers Tech Free to Support UN Treaty\"\nCurrent: has_strategic_catalyst=false ❌\nExpected: has_strategic_catalyst=true, catalyst_subtype=\"product_launch\"\nImpact: Falls back to potential_sell_the_fact recipe\nActual move: +37.4%\nNote: Explicit \"Launches\" keyword with new product/platform\n```\n\n## Detection Accuracy Summary\n\n**Current State**:\n- False Negatives (should detect, but don't): 4 cases (NEHC, XFOR, SMX, + others)\n- False Positives on Quantitative (should be quantitative, detected as strategic): WDAY, possibly others\n- Wrong Subtype (detected but wrong type): 5/5 detected cases = \"product_launch\"\n\n**Impact**: \n- 6 strategic catalysts fell back to pattern recipes (sell_the_fact)\n- LLM sees pattern warnings instead of catalyst guidance\n- Predicts NEUTRAL or wrong direction","status":"open","priority":1,"issue_type":"bug","assignee":"claude","created_at":"2025-11-21T12:02:07.632042-05:00","updated_at":"2025-11-21T12:26:36.847525-05:00","dependencies":[{"issue_id":"benz_sent_filter-20cc","depends_on_id":"benz_sent_filter-225c","type":"blocks","created_at":"2025-11-21T12:02:07.63604-05:00","created_by":"jyaunches"},{"issue_id":"benz_sent_filter-20cc","depends_on_id":"benz_sent_filter-edb5","type":"blocks","created_at":"2025-11-21T12:02:07.637643-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-225c","content_hash":"f489ee80bef07cb0a87f8ae2d4db3bbfb5d926b52222473494e2340fdc424f2e","title":"Strategic catalyst detection returns catalyst_subtype=null breaking benz_analyzer recipe selection","description":"## Bug Report\n\n**Severity**: CRITICAL - Blocks IMPL-016 strategic catalyst feature\n\n## Problem\n\nThe `/detect-strategic-catalyst` endpoint is correctly detecting strategic catalysts (high confidence 0.88-0.99) but returning **`catalyst_subtype: null`** in all cases.\n\n## Impact\n\nWithout catalyst_subtype, benz_analyzer cannot:\n- Select the STRATEGIC_CATALYST recipe\n- Apply type-specific prompt guidance\n- Suppress pattern warnings\n\nResult: System falls back to pattern-based recipes with \"sell the fact\" warnings, defeating the entire purpose of strategic catalyst detection.\n\n## Evidence from Evaluation Run\n\nRun ID: `2025-11-21_00-02_RUN_IMPL-016-TEST_during_move_pattern_failures`\n\n**7 out of 10 NEUTRAL predictions had strategic catalyst detected with null subtype**:\n\n```json\n// WKHS (M\u0026A merger agreement)\n{\n  \"has_strategic_catalyst\": true,\n  \"catalyst_subtype\": null,  // ← SHOULD BE \"m\u0026a\"\n  \"confidence\": 0.985\n}\n\n// SHCO (Executive changes)\n{\n  \"has_strategic_catalyst\": true,\n  \"catalyst_subtype\": null,  // ← SHOULD BE \"executive_changes\"\n  \"confidence\": 0.879\n}\n\n// SMX (Product launch)\n{\n  \"has_strategic_catalyst\": true,\n  \"catalyst_subtype\": null,  // ← SHOULD BE \"product_launch\"\n  \"confidence\": 0.XXX\n}\n```\n\nAll 7 cases: WKHS, SHCO, SMX, OPEN, DNN, WDAY, IMG\n\n## Expected Behavior\n\nResponse should include the detected subtype:\n\n```json\n{\n  \"has_strategic_catalyst\": true,\n  \"catalyst_subtype\": \"m\u0026a\",  // Or: executive_changes, product_launch, partnership, clinical_trial, corporate_restructuring\n  \"confidence\": 0.985\n}\n```\n\n## Test Cases\n\nUse these headlines from IMPL-016-TEST to verify fix:\n\n1. **WKHS** (M\u0026A): \"Workhorse Group Announces Merger Agreement...\" → should return `\"m\u0026a\"`\n2. **SHCO** (Executive): \"Soho House \u0026 Co CEO Andrew Carnie To Step Down...\" → should return `\"executive_changes\"`\n3. **SMX** (Product): \"SMX Launches Global Plastics Passport...\" → should return `\"product_launch\"`\n4. **IMG** (Partnership): \"Imagine AR Inks Non-Binding MoU...\" → should return `\"partnership\"`\n\n## Related Issues\n\n- CTXR (product launch with concrete milestone) was NOT detected at all (has_strategic_catalyst=false)\n- MURA (product launch) was NOT detected\n- Need to verify detection accuracy after subtype fix\n\n## Acceptance Criteria\n\n- [ ] API returns non-null `catalyst_subtype` for detected strategic catalysts\n- [ ] Subtype values match expected taxonomy: executive_changes, product_launch, partnership, m\u0026a, clinical_trial, corporate_restructuring\n- [ ] Re-run IMPL-016-TEST evaluation shows strategic catalyst recipes being selected\n- [ ] Verify no \"sell the fact\" warnings appear when strategic catalyst detected","status":"open","priority":1,"issue_type":"bug","assignee":"claude","created_at":"2025-11-21T10:15:16.611847-05:00","updated_at":"2025-11-21T10:15:16.611847-05:00"}
{"id":"benz_sent_filter-2cc1","content_hash":"14bb987a9a41b233efed72fa55abb5fe1ddd657985056977a571f0c3025e551a","title":"Phase 4: API Endpoint Updates","description":"Update API endpoints to return enhanced classification results","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T18:08:55.781383-05:00","updated_at":"2025-11-17T18:18:14.810779-05:00","closed_at":"2025-11-17T18:18:14.810779-05:00","dependencies":[{"issue_id":"benz_sent_filter-2cc1","depends_on_id":"benz_sent_filter-644f","type":"blocks","created_at":"2025-11-17T18:09:04.152072-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-2ea1","content_hash":"3c5b709b4c95bbef89e5bc3cef93fbf736162e5d7fe98224c61a44bb0893b0e1","title":"Add ML model lifecycle logging (critical)","description":"ClassificationService.__init__() loads HuggingFace models (30+ seconds) with ZERO logging. Add logging for: model name and loading start, model load completion with timing, device placement (CPU/GPU), initialization of sub-detectors (routine, quantitative, strategic), any model loading errors with full context.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T19:17:17.394622-05:00","updated_at":"2025-12-11T19:17:17.394622-05:00","labels":["critical-gap","logging","ml"]}
{"id":"benz_sent_filter-2eb8","content_hash":"1b2a5eb839bf1ad445b8f93f72a818e4ac1a73a8866107ad6f456d9e8a14544f","title":"Validation - check-work","description":"Run comprehensive validation: check acceptance criteria, run all tests with auto-fixes, validate integration, generate completion report.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T15:24:14.692097-05:00","updated_at":"2025-11-19T16:49:29.55968-05:00","closed_at":"2025-11-19T16:49:29.55968-05:00","dependencies":[{"issue_id":"benz_sent_filter-2eb8","depends_on_id":"benz_sent_filter-48ef","type":"blocks","created_at":"2025-11-19T15:24:24.304007-05:00","created_by":"jyaunches"},{"issue_id":"benz_sent_filter-2eb8","depends_on_id":"benz_sent_filter-b258","type":"parent-child","created_at":"2025-11-19T15:24:36.854926-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-3002","content_hash":"de7c2f9c52abe33f67913b70d9a8896612fc05b7f8000d7b5969749c88b029dd","title":"Phase 5: Integration Testing \u0026 Error Handling","description":"Add integration tests with real model and comprehensive error scenarios","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T21:50:38.691565-05:00","updated_at":"2025-11-16T22:04:10.071354-05:00","closed_at":"2025-11-16T22:04:10.071354-05:00","dependencies":[{"issue_id":"benz_sent_filter-3002","depends_on_id":"benz_sent_filter-19aa","type":"blocks","created_at":"2025-11-16T21:50:50.226768-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-341e","content_hash":"7e5b907ca654f676bb59ffa5a5fadff41134db50ffbbcad20323f5ed6e894a38","title":"Validation - check-work","description":"Run tests and validate acceptance criteria for all phases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T14:52:47.064454-05:00","updated_at":"2025-11-17T15:11:01.685445-05:00","closed_at":"2025-11-17T15:11:01.685445-05:00","dependencies":[{"issue_id":"benz_sent_filter-341e","depends_on_id":"benz_sent_filter-9307","type":"blocks","created_at":"2025-11-17T14:53:13.830755-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-36bb","content_hash":"388810fdbf6b2e3e052c256da8f3197137a5d77336aa5cc7c66aa3918cb7e335","title":"Feature: Conditional Language Detection","description":"Implement conditional language detection for future events to distinguish hedged/uncertain statements from concrete announcements. Adds pattern-based detection of conditional language (plans to, may, exploring, etc.) integrated into the classification pipeline.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-19T21:51:03.647558-05:00","updated_at":"2025-11-19T21:51:03.647558-05:00"}
{"id":"benz_sent_filter-3746","content_hash":"88f343d0b0faa3c83be0e4c061e54c7a89ed6246b7cc42aebefa5f723f14c321","title":"Debug routine operations filter - test dataset articles","description":"Articles from evaluation run 2025-11-22_08-08_RUN_test_dataset_runnable for debugging routine operations filtering logic.\n\n**Article 1: benzinga_47327444_SATS**\n- Tickers: SATS, T\n- Title: EchoStar To Sell 3.45 GHz And 600 MHz Spectrum Licenses To AT\u0026T For $23B, Establishes Hybrid MNO Agreement With Boost Mobile To Address FCC Inquiries\n- Routine Operations: All tickers marked as material (none filtered)\n- Temporal Category: unknown\n\n**Article 2: benzinga_47469914_SMR**\n- Tickers: SMR\n- Title: NuScale Power Supports ENTRA1 Energy's Agreement With Tennessee Valley Authority To Deploy Up To 6 Gigawatts Of NuScale SMR Capacity Across TVA's Seven-State Service Region\n- Routine Operations: All tickers marked as material (none filtered)\n- Temporal Category: unknown\n\n**Article 3: benzinga_47327444_T** (same as Article 1, different eval_id)\n- Tickers: SATS, T\n- Title: EchoStar To Sell 3.45 GHz And 600 MHz Spectrum Licenses To AT\u0026T For $23B, Establishes Hybrid MNO Agreement With Boost Mobile To Address FCC Inquiries\n- Routine Operations: All tickers marked as material (none filtered)\n- Temporal Category: unknown\n\n**Article 4: benzinga_47181720_RCAT**\n- Tickers: LTRX, RCAT\n- Title: Lantronix's TAA- And NDAA-Compliant Solution Selected By Teal Drones For Production Of Black Widow Drones Under U.S. Army's Short-Range Reconnaissance Program\n- Routine Operations: All tickers marked as material (none filtered)\n- Temporal Category: unknown\n\n**Article 5: benzinga_47088121_IBRX**\n- Tickers: IBRX\n- Title: ImmunityBio Announces Early QUILT-106 Phase I Data Showing Complete Responses In Waldenstrom Macroglobulinemia Patients Treated With CD19 CAR-NK Therapy\n- Routine Operations: All tickers marked as material (none filtered)\n- Temporal Category: unknown\n\n**Article 6: benzinga_47279040_ANTE**\n- Tickers: ANTE\n- Title: AirNet Technology Enters Registered Direct Offering For Sale Of 80,826,225 Ordinary Shares And Accompanying Warrants At Combined Purchase Price Of $2.227; Gross Proceeds $180M\n- Routine Operations: All tickers marked as material (none filtered)\n- Temporal Category: unknown\n\n**Unique Tickers**: ANTE, IBRX, LTRX, RCAT, SATS, SMR, T\n\n**Note**: All articles in this test dataset had `temporal_category: unknown` and no tickers were filtered as routine operations. This suggests the routine operations filter is currently passing all articles through.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-22T08:13:31.618754-05:00","updated_at":"2025-11-22T08:13:31.618754-05:00","labels":["debugging","routine-operations","test-dataset"]}
{"id":"benz_sent_filter-375e","content_hash":"fc5a1b15f8dc7288c1573fa75f504e789e8d1f280c1a8c3f1674109007505fc2","title":"Phase 2: Response Models for Multi-Ticker Results","description":"Define Pydantic models for multi-ticker routine operations response structure.\n\nKey Work:\n- Add CoreClassification model (opinion, news, temporal, scores)\n- Add RoutineOperationResult model (routine operation fields)\n- Add MultiTickerRoutineResponse model (headline + nested results)\n- Use exclude_none=True for optional fields\n\nTests:\n- Update tests/test_models.py with 6 new test methods\n- Test validation, serialization, and error handling","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-18T15:29:49.757665-05:00","updated_at":"2025-11-18T15:38:20.681471-05:00","closed_at":"2025-11-18T15:38:20.681471-05:00","dependencies":[{"issue_id":"benz_sent_filter-375e","depends_on_id":"benz_sent_filter-c3b6","type":"blocks","created_at":"2025-11-18T15:30:01.437156-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-3eb0","content_hash":"a691d31ad36f447efca4bec9f46285baea194d14be200500366b8ab12daf6482","title":"Phase 4: API Endpoint and Service Integration","description":"Create REST API endpoint and integrate detector with ClassificationService. Makes feature accessible to benz_analyzer and other consumers.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T15:24:14.254737-05:00","updated_at":"2025-11-19T16:30:43.837493-05:00","closed_at":"2025-11-19T16:30:43.837493-05:00","dependencies":[{"issue_id":"benz_sent_filter-3eb0","depends_on_id":"benz_sent_filter-0619","type":"blocks","created_at":"2025-11-19T15:24:24.097997-05:00","created_by":"jyaunches"},{"issue_id":"benz_sent_filter-3eb0","depends_on_id":"benz_sent_filter-b258","type":"parent-child","created_at":"2025-11-19T15:24:36.603808-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-410d","content_hash":"8fbf46fbe71edce2f06e3b9a976d061573ffb3153f8b42b6cb7dfda96c8f77cd","title":"Feature: MNLS Classification API","description":"Implement MNLS-based sentiment classification service for article title analysis with zero-shot NLI capabilities","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-16T21:50:27.341638-05:00","updated_at":"2025-11-16T22:05:32.801756-05:00","closed_at":"2025-11-16T22:05:32.801756-05:00"}
{"id":"benz_sent_filter-443f","content_hash":"38fda0fb0c19c996821968aad17b3ff6ade8a3a76b34b219d703b1be40b14781","title":"Feature: Far-Future Forecast Detection","description":"Implement far-future forecast detection to distinguish multi-year projections (\u003e1 year) from near-term guidance (\u003c1 year), reducing false positives on speculative long-term forecasts by 60%+ with 90%+ detection accuracy.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-17T18:08:45.145899-05:00","updated_at":"2025-11-17T18:19:06.516539-05:00","closed_at":"2025-11-17T18:19:06.516539-05:00"}
{"id":"benz_sent_filter-4729","content_hash":"b5cc240b69d4a7fb785a6922e28268a10c0f27c3acfeb44640e018d33a0afcc2","title":"Add logging to RoutineOperationDetectorMNLS","description":"routine_detector_mnls.py (373 lines) has ZERO logging. Add logging for: detection pipeline start, materiality scoring steps, company context lookup, confidence calculations, detection results with scores and reasoning.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T19:17:17.845271-05:00","updated_at":"2025-12-11T19:17:17.845271-05:00","labels":["business-logic","critical-gap","logging"]}
{"id":"benz_sent_filter-48d6","content_hash":"49d061bc4668b64ad102b61bbe5dbb0b7ed5125ca4a2682adf96705a5575af92","title":"Phase 3: Classification Service Core","description":"Implement classification service with NLI model and zero-shot inference","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T21:50:38.308382-05:00","updated_at":"2025-11-16T22:00:51.069718-05:00","closed_at":"2025-11-16T22:00:51.069718-05:00","dependencies":[{"issue_id":"benz_sent_filter-48d6","depends_on_id":"benz_sent_filter-dbd4","type":"blocks","created_at":"2025-11-16T21:50:50.020296-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-48ef","content_hash":"6b00ac5f91dead27fde7464390bb7497bf28a56b5cff3a4a8eb8b76f5d387b88","title":"Phase 5: Comprehensive Testing and Documentation","description":"Validate feature with extensive test coverage, real-world cases, and edge cases. Document API usage and integration patterns for benz_analyzer.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T15:24:14.484508-05:00","updated_at":"2025-11-19T16:47:47.862928-05:00","closed_at":"2025-11-19T16:47:47.862928-05:00","dependencies":[{"issue_id":"benz_sent_filter-48ef","depends_on_id":"benz_sent_filter-3eb0","type":"blocks","created_at":"2025-11-19T15:24:24.196069-05:00","created_by":"jyaunches"},{"issue_id":"benz_sent_filter-48ef","depends_on_id":"benz_sent_filter-b258","type":"parent-child","created_at":"2025-11-19T15:24:36.703224-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-4a53","content_hash":"167592db6d2f84226324dc7afbec97a755c2a07ef8e94d5f0e2a1dcef06e64b0","title":"Phase 1: Core Detector Implementation","description":"Implement the core strategic catalyst detector with MNLI-based presence detection and type classification across 6 catalyst categories.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-20T22:39:16.828089-05:00","updated_at":"2025-11-20T22:49:58.975965-05:00","closed_at":"2025-11-20T22:49:58.975965-05:00","dependencies":[{"issue_id":"benz_sent_filter-4a53","depends_on_id":"benz_sent_filter-ae65","type":"blocks","created_at":"2025-11-20T22:39:16.830722-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-53f3","content_hash":"a22672db9a3ba3901b051e6c6b94fed5dc304054b878e92dbbd7e5086553f750","title":"Phase 2: ClassificationService Integration","description":"Add _analyze_conditional_language() method to ClassificationService with conditional execution for FUTURE_EVENT temporal category","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:51:17.165174-05:00","updated_at":"2025-11-19T21:57:36.234235-05:00","closed_at":"2025-11-19T21:57:36.234235-05:00","external_ref":"specs/2025-11-19_21-30_conditional_language_detection.md","dependencies":[{"issue_id":"benz_sent_filter-53f3","depends_on_id":"benz_sent_filter-ec0d","type":"blocks","created_at":"2025-11-19T21:51:25.694172-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-5d84","content_hash":"8b6257c68d55f459311b6ccacb85e5c38b6dc34378b57fecdc7499a5f5a8242b","title":"Phase 2: Add Company Relevance Service Logic","description":"Implement company relevance detection in classification service using NLI pipeline","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T14:52:46.178742-05:00","updated_at":"2025-11-17T14:58:46.386502-05:00","closed_at":"2025-11-17T14:58:46.386502-05:00","dependencies":[{"issue_id":"benz_sent_filter-5d84","depends_on_id":"benz_sent_filter-1412","type":"blocks","created_at":"2025-11-17T14:53:13.073733-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-5e0c","content_hash":"045d6a8c5655a9ae918c203f07e040bb96137a19c346de9d3ef4056debb860b7","title":"Feature: Multi-Ticker Routine Operations Endpoint","description":"Add new /classify/routine-operations/multi-ticker endpoint that eliminates redundant MNLS model inference when classifying same headline against multiple ticker symbols. Provides 40-50% performance improvement for multi-ticker routine operations queries.\n\nSpec: specs/2025-11-18_multi_ticker_routine_operations.md\nTest Spec: specs/tests_2025-11-18_multi_ticker_routine_operations.md\n\nKey Features:\n- Core classification runs once, routine operations checked per ticker\n- Reduces multi-ticker query time from ~9s to ~3s for 3 tickers\n- Maintains backward compatibility with existing /classify endpoint\n- New response models for multi-ticker results\n- Comprehensive integration tests with performance validation","status":"open","priority":1,"issue_type":"epic","assignee":"claude","created_at":"2025-11-18T15:29:24.721708-05:00","updated_at":"2025-11-18T15:29:24.721708-05:00"}
{"id":"benz_sent_filter-5f40","content_hash":"ac3147d9f545438c427f5de24abf7486022fb3693b4f3dce644f5607248f4c90","title":"Phase 3: API Integration","description":"Integrate into classification endpoints with per-dimension response structure","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T19:28:46.036183-05:00","updated_at":"2025-11-17T19:40:16.784267-05:00","closed_at":"2025-11-17T19:40:16.784267-05:00","dependencies":[{"issue_id":"benz_sent_filter-5f40","depends_on_id":"benz_sent_filter-9d20","type":"blocks","created_at":"2025-11-17T19:28:56.040923-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-644f","content_hash":"82089c0ca869a8d3d7a0e3ffe516dae8ae0754c1a75aea93dde29465e91b233c","title":"Phase 3: Service Integration","description":"Integrate far-future analysis into ClassificationService","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T18:08:55.586543-05:00","updated_at":"2025-11-17T18:15:49.772676-05:00","closed_at":"2025-11-17T18:15:49.772676-05:00","dependencies":[{"issue_id":"benz_sent_filter-644f","depends_on_id":"benz_sent_filter-ad04","type":"blocks","created_at":"2025-11-17T18:09:04.062221-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-74e7","content_hash":"cd3a51f3bc7225e412448c879123d9ebf28d2349054905815d53384d91cc9798","title":"Validation - check-work","description":"Run tests and validate acceptance criteria","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-17T19:28:46.447704-05:00","updated_at":"2025-11-17T19:28:46.447704-05:00","dependencies":[{"issue_id":"benz_sent_filter-74e7","depends_on_id":"benz_sent_filter-7e38","type":"blocks","created_at":"2025-11-17T19:28:56.349879-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-76c6","content_hash":"bf53b1490d04820ae29b853f5cd1762cac61b572f2fec4f19ad0fff81306a057","title":"Add vanity metrics detection filter to identify user growth/engagement metrics without revenue correlation","description":"Implement filter to detect articles focused on vanity metrics (user counts, MAU, engagement stats, technical benchmarks) that don't directly indicate revenue impact. Flag these for reduced priority or additional revenue correlation checks.\n\nContext from benz_evaluator false positive analysis:\n- META: \"Meta Announces Threads Has Passed 400M Users Monthly Active Users, Up From 350M In April\" - triggered false positive\n- Stock moved +3.15% day-of but gave back gains next day (-1.26%)\n- Article focused on impressive user growth number (50M new users) but no revenue/monetization discussion\n- Market initially reacted to big number, then realized user growth ≠ revenue growth\n\nPattern: Articles highlighting impressive non-financial metrics (users, downloads, views, engagement, technical specs) without connecting to revenue often trigger false positives. System reacts to large numbers without assessing financial materiality.\n\nThis CAN be partially detected from title/summary - \"400M Users\", \"Passes X Million Downloads\", \"Engagement Up X%\" are title-level signals.","design":"## Detection Strategy\n\n### Vanity Metric Indicators\n\n**User/Engagement Metrics**:\n- \"X million users\", \"monthly active users\", \"MAU\", \"DAU\"\n- \"downloads\", \"installs\", \"sign-ups\"\n- \"engagement up\", \"time spent\", \"sessions\"\n- \"views\", \"impressions\", \"reach\"\n\n**Technical/Performance Metrics**:\n- \"X% faster\", \"2x performance\", \"6x throughput\"\n- \"uptime\", \"latency\", \"response time\"\n- \"benchmark shows\", \"scores X points\"\n\n**Market Position Metrics**:\n- \"market share\", \"ranking\", \"top X in category\"\n- \"surpasses competitor\", \"closes gap with\"\n\n### Revenue Correlation Check\n\n**Look for revenue indicators to override filter**:\n- \"monetization\", \"revenue per user\", \"ARPU\"\n- \"subscription\", \"paid tier\", \"premium\"\n- \"advertising revenue\", \"ad load\"\n- \"conversion rate\", \"paying customers\"\n\n### Filter Logic\n\n```python\ndef analyze_vanity_metrics(title, summary):\n    vanity_score = 0\n    revenue_score = 0\n    \n    # Check for vanity metrics\n    if matches_user_metrics(title, summary):\n        vanity_score += 2\n    if matches_technical_metrics(title, summary):\n        vanity_score += 1\n    if has_big_numbers_without_context(title):\n        vanity_score += 1\n    \n    # Check for revenue correlation\n    if mentions_revenue_connection(title, summary):\n        revenue_score += 3\n    if mentions_monetization(title, summary):\n        revenue_score += 2\n    \n    # Decision\n    if vanity_score \u003e= 2 and revenue_score == 0:\n        return FilterResult(\n            flag=\"vanity_metrics_without_revenue\",\n            action=\"flag_for_review\",\n            reason=\"Article focuses on user/engagement metrics without revenue correlation\",\n            confidence_adjustment=0.5\n        )\n```\n\n### Examples to Catch\n\n✓ \"Meta Announces Threads Has Passed 400M Users Monthly Active Users\"\n✓ \"App Downloads Surpass 100 Million\"\n✓ \"Platform Engagement Up 50% Year-Over-Year\"\n✓ \"New Product 6x Faster Than Previous Generation\"\n\n### Examples to Pass\n\n✗ \"Meta Threads Reaches 400M MAU, ARPU Up 25%\" (has revenue metric)\n✗ \"100M Downloads Drive $50M in Subscription Revenue\" (revenue connection)\n✗ \"User Growth Fuels 30% Revenue Beat\" (explicit revenue link)\n\n## Implementation Approach\n\nAdd as **research question** in benz_sent_filter target question framework:\n\n**Question**: \"Does this article focus on vanity metrics (users, engagement, technical specs) without connecting to revenue/monetization?\"\n\n**If Yes**: \n- Flag: `vanity_metrics_focus: true`\n- Metadata: `{\"metric_type\": \"user_growth\", \"revenue_mentioned\": false}`\n- Recommendation: \"Consider reduced confidence - user metrics without revenue correlation\"\n\n**If No (revenue mentioned)**:\n- Proceed with normal assessment\n\n## Edge Cases\n\n- **User growth WITH monetization**: Should NOT trigger (revenue correlation exists)\n- **Technical specs for hardware**: May be legitimate (new product announcement)\n- **Engagement metrics for ad-based business**: Complex - engagement can drive revenue\n- **Subscriber growth**: More material than MAU (paying users vs total users)","acceptance_criteria":"- Filter detects user/engagement metrics without revenue mentions with 85%+ accuracy\n- META-type articles (MAU growth without monetization details) are flagged\n- Articles with \"users + revenue\" mentions do NOT trigger filter\n- Filter adds metadata explaining vanity metric type detected\n- Reduces false positives on vanity metric articles by 50%+\n- Does not over-filter legitimate user growth for subscription businesses","status":"open","priority":2,"issue_type":"feature","assignee":"claude","created_at":"2025-11-17T14:54:37.39432-05:00","updated_at":"2025-11-17T14:54:37.39432-05:00"}
{"id":"benz_sent_filter-780b","content_hash":"d79ce1f6f24503b05b7e8d0f5b4e2a01a542d537bd031f9eba3adfd574d4be26","title":"Phase 2: API Integration - Endpoint and Models","description":"Integrate strategic catalyst detector into FastAPI with /detect-strategic-catalyst endpoint and Pydantic models.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-20T22:39:16.921055-05:00","updated_at":"2025-11-20T23:14:48.673133-05:00","closed_at":"2025-11-20T23:14:48.673133-05:00","dependencies":[{"issue_id":"benz_sent_filter-780b","depends_on_id":"benz_sent_filter-ae65","type":"blocks","created_at":"2025-11-20T22:39:16.92285-05:00","created_by":"jyaunches"},{"issue_id":"benz_sent_filter-780b","depends_on_id":"benz_sent_filter-4a53","type":"blocks","created_at":"2025-11-20T22:39:23.527237-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-7e38","content_hash":"fb15f708440b7150986e949f8f42271272acbfd479fd04bdcad0cd300f2aa9e9","title":"Phase 4: Integration Testing \u0026 Validation","description":"End-to-end testing, accuracy measurement, and API documentation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T19:28:46.237655-05:00","updated_at":"2025-11-17T19:40:48.810416-05:00","closed_at":"2025-11-17T19:40:48.810416-05:00","dependencies":[{"issue_id":"benz_sent_filter-7e38","depends_on_id":"benz_sent_filter-5f40","type":"blocks","created_at":"2025-11-17T19:28:56.193552-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-7ef5","content_hash":"6db801a75b0666be3d80b64fcd10027875ef5539c90846f4ee0126db130fc17f","title":"Phase 1: Pattern Detection Core","description":"Implement regex-based pattern detection functions for far-future indicators","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T18:08:55.297088-05:00","updated_at":"2025-11-17T18:11:58.261202-05:00","closed_at":"2025-11-17T18:11:58.261202-05:00"}
{"id":"benz_sent_filter-812a","content_hash":"23ba5634cb73e907b45a1decc778a7e67f519cd8140b058f66cb847f168cc29e","title":"Improve ticker materiality detection for buyer/seller transactions","description":"**Problem**: Routine operations endpoint is NOT detecting ticker asymmetry in multi-party transactions.\n\n**Test Case**: SATS/T spectrum sale article\n- Headline: \"EchoStar To Sell 3.45 GHz And 600 MHz Spectrum Licenses To AT\u0026T For $23B...\"\n- Expected: material_tickers=[\"SATS\"], filtered_tickers=[\"T\"]\n- Actual: material_tickers=[\"SATS\", \"T\"], filtered_tickers=[]\n\n**Current Behavior**:\nBoth SATS (seller, EchoStar) and T (buyer, AT\u0026T) are marked as material tickers. The detector is not recognizing that T is a secondary mention (the buyer in the transaction).\n\n**Impact**:\n- Downstream systems (benz_analyzer) rely on filtered_tickers to apply conservative recipes for secondary tickers\n- When both tickers are marked as material, both get aggressive catalyst recipes\n- Results in false positives for buyers in asset sales (e.g., T predicted POSITIVE but moved NEUTRAL -1.8%)\n\n**Expected Detection Logic**:\nFor transaction headlines (sales, acquisitions, M\u0026A):\n1. Identify the PRIMARY actor (seller, acquirer, target) - usually the subject of the sentence\n2. Identify SECONDARY mentions (buyer, counterparty) - usually in prepositional phrases\n3. Mark primary as material_tickers, secondary as filtered_tickers\n\n**Transaction Patterns to Detect**:\n- \"Company A sells X to Company B\" → A=material, B=filtered\n- \"Company A acquires Company B\" → A=material, B=filtered (unless acquisition target is primary focus)\n- \"Company A buys X from Company B\" → A=material, B=filtered\n- \"Company A partners with Company B\" → May be symmetric, both material\n\n**Test Article (curl)**:\n```bash\ncurl -X POST http://localhost:8000/analyze -H \"Content-Type: application/json\" -d '{\"id\":\"benzinga_47327444\",\"title\":\"EchoStar To Sell 3.45 GHz And 600 MHz Spectrum Licenses To AT\u0026T For $23B, Establishes Hybrid MNO Agreement With Boost Mobile To Address FCC Inquiries\",\"published_time\":\"2025-08-26T10:34:25+00:00\",\"tickers\":[\"SATS\",\"T\"],\"source\":\"polygon\",\"publisher\":\"\",\"keywords\":[],\"market_session\":\"pre_market\",\"time_to_market_open\":0}'\n```\n\n**Verification**:\nAfter fix, this should return:\n```json\n{\n  \"material_tickers\": [\"SATS\"],\n  \"filtered_tickers\": [\"T\"]\n}\n```","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-21T22:00:35.475924-05:00","updated_at":"2025-11-21T22:00:35.475924-05:00"}
{"id":"benz_sent_filter-8389","content_hash":"728a4bea2a28c77e8498f80c2293b53117dd8545b78ee8f638484f9aeaa7dfd6","title":"Feature: Routine Operations Filter","description":"Implement MNLS-based routine business operations filter to detect immaterial process announcements in financial services news","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-17T19:28:34.215769-05:00","updated_at":"2025-11-17T19:40:53.03728-05:00","closed_at":"2025-11-17T19:40:53.03728-05:00","external_ref":"specs/2025-11-17_17-30_routine_operations_filter.md"}
{"id":"benz_sent_filter-8395","content_hash":"adf565fc28de7360ff3ee974bdb3a869f47d84a4de9095ee1f40fb0cd4da5bb4","title":"Add Loguru logging infrastructure","description":"Add Loguru for structured JSON logging with daily rotation. Create logging_config.py module with setup_logging() function. Update __main__.py to call setup_logging() before uvicorn starts. Add loguru\u003e=0.7.0 to pyproject.toml. This repo currently has only 2 logging statements total - this is the foundation for all other logging work.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T19:17:17.155459-05:00","updated_at":"2025-12-11T19:17:17.155459-05:00","labels":["infrastructure","logging"]}
{"id":"benz_sent_filter-8421","content_hash":"6bd0f64e74f62d180e6302b871e7055ea868db370c6a7db9fa33c2a6039b8ba9","title":"Add FastAPI request/response middleware logging","description":"Add HTTP middleware to api/app.py that logs all requests with: method, path, status code, and latency. Use structured logging format compatible with Loki. Add startup/shutdown event logging for service initialization.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T19:17:19.021389-05:00","updated_at":"2025-12-11T19:17:19.021389-05:00","labels":["api","logging","middleware"]}
{"id":"benz_sent_filter-8abf","content_hash":"8875c3ea2fab11c23c968859685ddcb3b020b1078e12e2279389f73ad34c222e","title":"Feature: Company Relevance Detection","description":"Extend classification endpoints with optional company parameter to detect if headlines are about specific companies using zero-shot NLI","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-17T14:52:34.893702-05:00","updated_at":"2025-11-17T15:11:01.885846-05:00","closed_at":"2025-11-17T15:11:01.885846-05:00"}
{"id":"benz_sent_filter-9307","content_hash":"b5e0170fdc00621e6b75239562bd863cd55f9985f79e6d4b0741d697864274df","title":"Phase 5: Documentation \u0026 Examples","description":"Update documentation with company relevance API usage and examples","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T14:52:46.737284-05:00","updated_at":"2025-11-17T15:07:54.883599-05:00","closed_at":"2025-11-17T15:07:54.883599-05:00","dependencies":[{"issue_id":"benz_sent_filter-9307","depends_on_id":"benz_sent_filter-9d4a","type":"blocks","created_at":"2025-11-17T14:53:13.644675-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-94ed","content_hash":"8ca7fadbee92cb3e444dec1378c5111ba44919bfe2918f2f01cfd0c6b4b7cf07","title":"Phase 3: Response Model Extension","description":"Extend ClassificationResult Pydantic model with conditional_language and conditional_patterns optional fields","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:51:17.327285-05:00","updated_at":"2025-11-19T21:57:46.537636-05:00","closed_at":"2025-11-19T21:57:46.537636-05:00","external_ref":"specs/2025-11-19_21-30_conditional_language_detection.md","dependencies":[{"issue_id":"benz_sent_filter-94ed","depends_on_id":"benz_sent_filter-53f3","type":"blocks","created_at":"2025-11-19T21:51:25.802945-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-94f4","content_hash":"fc085cde0f6418f8736a68ee61318a3b5eacadd630bb282e4f27ce816206408d","title":"Validation - check-work","description":"Run /feature_wf:check-work to validate all acceptance criteria met and tests passing","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-11-19T21:51:17.69723-05:00","updated_at":"2025-11-19T22:24:39.565461-05:00","external_ref":"specs/2025-11-19_21-30_conditional_language_detection.md","dependencies":[{"issue_id":"benz_sent_filter-94f4","depends_on_id":"benz_sent_filter-e3be","type":"blocks","created_at":"2025-11-19T21:51:26.048254-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-9d20","content_hash":"7bf53c6acff8c64d16ffeb56800eef5f6cea4ef9cf2cc71e5429ee35d7b8f169","title":"Phase 2: Materiality Assessment","description":"Add company context and materiality calculations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T19:28:45.832211-05:00","updated_at":"2025-11-17T19:36:51.412731-05:00","closed_at":"2025-11-17T19:36:51.412731-05:00","dependencies":[{"issue_id":"benz_sent_filter-9d20","depends_on_id":"benz_sent_filter-ad51","type":"blocks","created_at":"2025-11-17T19:28:55.946614-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-9d4a","content_hash":"7b920a93a6696691c611a47f192fbfca047f364cd1840294c1c9b2a4cba85de5","title":"Phase 4: Integration Testing \u0026 Validation","description":"Add integration tests with real model to validate company relevance detection","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T14:52:46.545409-05:00","updated_at":"2025-11-17T15:05:59.413568-05:00","closed_at":"2025-11-17T15:05:59.413568-05:00","dependencies":[{"issue_id":"benz_sent_filter-9d4a","depends_on_id":"benz_sent_filter-b50f","type":"blocks","created_at":"2025-11-17T14:53:13.460237-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-9e1b","content_hash":"201479ce80e7f5e1827ccf3049c7100b3f7d7f8b05b4615ae66800f8564be84d","title":"Phase 3: Documentation and Testing","description":"Add comprehensive test coverage and update API documentation for strategic catalyst detection.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-20T22:39:17.025868-05:00","updated_at":"2025-11-20T23:25:27.388123-05:00","closed_at":"2025-11-20T23:25:27.388123-05:00","dependencies":[{"issue_id":"benz_sent_filter-9e1b","depends_on_id":"benz_sent_filter-ae65","type":"blocks","created_at":"2025-11-20T22:39:17.028908-05:00","created_by":"jyaunches"},{"issue_id":"benz_sent_filter-9e1b","depends_on_id":"benz_sent_filter-780b","type":"blocks","created_at":"2025-11-20T22:39:23.607553-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-a645","content_hash":"63510d9edecb05dc9a3866e18b613cead35ff7b9776ac5f11c1af8c27ac90879","title":"Phase 4: Integration Testing and Performance Validation","description":"Create comprehensive integration tests with real MNLS model and measure actual performance improvements.\n\nKey Work:\n- Create integration/test_multi_ticker_routine.py with 7 tests\n- Update integration/test_filter_activation_report.py with multi-ticker analysis\n- Update integration/test_classification_integration.py with regression tests\n- Update integration/README.md with documentation\n- Validate 40-50% performance improvement\n\nNo new unit tests - integration validation only.","status":"open","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-18T15:29:50.388424-05:00","updated_at":"2025-11-18T15:29:50.388424-05:00","dependencies":[{"issue_id":"benz_sent_filter-a645","depends_on_id":"benz_sent_filter-dfd1","type":"blocks","created_at":"2025-11-18T15:30:01.626581-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-ad04","content_hash":"f4cd1280a0d351c4804d967147e29419e89127e69de41adaaca178b7c94314c5","title":"Phase 2: Data Model Extensions","description":"Extend Pydantic models to support far-future forecast metadata","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T18:08:55.39812-05:00","updated_at":"2025-11-17T18:13:46.166296-05:00","closed_at":"2025-11-17T18:13:46.166296-05:00","dependencies":[{"issue_id":"benz_sent_filter-ad04","depends_on_id":"benz_sent_filter-7ef5","type":"blocks","created_at":"2025-11-17T18:09:03.974889-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-ad51","content_hash":"4eeeb3b6e8198caa15209744e0c4fe74c77c9a16388ae6217d30e58813e1eee2","title":"Phase 1: Core Detection Engine","description":"Implement pattern matching, scoring, dollar extraction, and confidence calculation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T19:28:45.65897-05:00","updated_at":"2025-11-17T19:33:05.580755-05:00","closed_at":"2025-11-17T19:33:05.580755-05:00","dependencies":[{"issue_id":"benz_sent_filter-ad51","depends_on_id":"benz_sent_filter-8389","type":"parent-child","created_at":"2025-11-17T19:28:55.854559-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-ae65","content_hash":"269af4c1cfcba3eebaa8e9e60df9c4810ac8b6e47329b6c12a35ee13ab9527a0","title":"Feature: Strategic Catalyst Detection","description":"Implement strategic catalyst detection API endpoint to identify transformational corporate events (executive changes, mergers, partnerships, product launches, rebranding, clinical trials). Spec: specs/2025-11-20_21-59_strategic_catalyst_detection.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-20T22:39:07.279873-05:00","updated_at":"2025-11-20T23:31:54.537598-05:00","closed_at":"2025-11-20T23:31:54.537598-05:00"}
{"id":"benz_sent_filter-b258","content_hash":"fff143be11036ff4c072c78b17e4b5ce0018b81595ab1fd7f9fd5edadeaaefcc","title":"Feature: Quantitative Catalyst Detection MNLI","description":"MNLI-based quantitative catalyst detection API for benz_analyzer integration (IMPL-016 Part 1). Provides endpoint to detect financial catalysts (dividends, acquisitions, buybacks, earnings, guidance) with semantic understanding via MNLI + regex value extraction.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-19T15:23:56.877062-05:00","updated_at":"2025-11-19T16:49:37.499177-05:00","closed_at":"2025-11-19T16:49:37.499177-05:00"}
{"id":"benz_sent_filter-b50f","content_hash":"22620d6b4ac4410593ddbc8f747396ed1370ec032254dbe459dbbe00ba08e0a9","title":"Phase 3: Update API Endpoints","description":"Modify API endpoints to accept company parameter and return company relevance","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T14:52:46.355505-05:00","updated_at":"2025-11-17T15:02:42.992519-05:00","closed_at":"2025-11-17T15:02:42.992519-05:00","dependencies":[{"issue_id":"benz_sent_filter-b50f","depends_on_id":"benz_sent_filter-5d84","type":"blocks","created_at":"2025-11-17T14:53:13.259831-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-b5ae","content_hash":"06e4fb48078a1a9a470e27cb8bb31696c35d01ec8f78326595a9dbeb50dedf27","title":"Phase 6: Documentation \u0026 Examples","description":"Update documentation with far-future forecast feature usage and examples","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-17T18:08:56.159379-05:00","updated_at":"2025-11-17T18:08:56.159379-05:00","dependencies":[{"issue_id":"benz_sent_filter-b5ae","depends_on_id":"benz_sent_filter-c78c","type":"blocks","created_at":"2025-11-17T18:09:04.332027-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-c1fb","content_hash":"bfc41e74ea49cf5f83bcd1a56996415908cdffa49c19a075acb4e451c751557f","title":"API endpoints timing out when called from benz_analyzer after refactor","description":"After benz_analyzer's headline classification filter refactor (2025-11-22), all API calls to benz_sent_filter endpoints are timing out at exactly 5 seconds, returning no data.\n\n**Reporter**: benz_analyzer (via benz_evaluator evaluation runs)\n\n**Impact**: 33% accuracy regression in benz_analyzer predictions (50% → 16.7%) due to missing classification data from benz_sent_filter.\n\n**Timing Evidence**:\nAll filters calling benz_sent_filter endpoints show exactly ~5.00 second execution times (HTTP timeout):\n- `opinion_filter` (calls `/classify`): 5.002s\n- `routine_operation_filter` (calls `/routine-operations`): 5.003s  \n- `strategic_catalyst_detection`: 5.002s\n- `quantitative_catalyst_detection`: Not appearing in metadata (likely also timing out)\n\n**Response Data Evidence**:\nWhen timeouts occur, filters receive empty/default responses:\n- `per_ticker_responses: {}` (should contain ticker analysis)\n- `temporal_category: \"unknown\"` (should be actual classification)\n- `confidence: 0` (should be actual confidence score)\n- `is_opinion: false` with no actual classification performed\n\n**Working Baseline** (2025-11-22_08-56 run):\n- `headline_classification.execution_time: 7.93s` (normal)\n- `per_ticker_responses` populated with data: `{\"SMR\": {...}}`\n- Proper temporal classifications returned\n\n**Broken Run** (2025-11-22_18-54 run):\n- All benz_sent_filter calls: exactly 5.00x seconds\n- All response data: empty or default values\n- Zero successful API responses across 6 test articles\n\n**Test Articles** (from IMPL-025 test dataset):\n\n1. **benzinga_47469914_SMR**\n   - Title: \"NuScale Power Supports ENTRA1 Energy's Agreement With Tennessee Valley Authority To Deploy Up To 6 Gigawatts Of NuScale SMR Capacity...\"\n   - Tickers: [\"SMR\"]\n   - Published: 2025-09-03T12:01:34+00:00\n\n2. **benzinga_47327444_SATS**\n   - Title: \"EchoStar To Sell 3.45 GHz And 600 MHz Spectrum Licenses To AT\u0026T For $23B, Establishes Hybrid MNO Agreement...\"\n   - Tickers: [\"SATS\", \"T\"]\n   - Published: 2025-08-26T10:34:25+00:00\n\n3. **benzinga_47327444_T** (same article, T ticker)\n   - Title: \"EchoStar To Sell 3.45 GHz And 600 MHz Spectrum Licenses To AT\u0026T For $23B...\"\n   - Tickers: [\"SATS\", \"T\"]\n   - Published: 2025-08-26T10:34:25+00:00\n\n4. **benzinga_47279040_ANTE**\n   - Title: \"AirNet Technology Enters Registered Direct Offering For Sale Of 80,826,225 Ordinary Shares... Gross Proceeds $180M\"\n   - Tickers: [\"ANTE\"]\n   - Published: 2025-08-22T12:02:55+00:00\n\n5. **benzinga_47181720_RCAT**\n   - Title: \"Lantronix's TAA- And NDAA-Compliant Solution Selected By Teal Drones For Production Of Black Widow Drones...\"\n   - Tickers: [\"LTRX\", \"RCAT\"]\n   - Published: 2025-08-18T11:08:00+00:00\n\n6. **benzinga_47088121_IBRX**\n   - Title: \"ImmunityBio Announces Early QUILT-106 Phase I Data Showing Complete Responses In Waldenstrom Macroglobulinemia Patients...\"\n   - Tickers: [\"IBRX\"]\n   - Published: 2025-08-13T12:36:19+00:00\n\n**What Changed in benz_analyzer**:\nThe `HeadlineClassificationFilter` was split into two separate filters:\n- `OpinionFilter` → calls `/classify` endpoint\n- `RoutineOperationFilter` → calls `/routine-operations` endpoint\n\nBoth filters use the same `HeadlineClassificationClient` that was used before, but something about the refactor is causing connection failures.\n\n**Possible Root Causes**:\n1. **Service not running**: benz_sent_filter service is down or unreachable\n2. **Endpoint URL changed**: Client pointing to wrong host/port\n3. **Request format mismatch**: New filter implementations sending malformed requests\n4. **Authentication/headers missing**: Required headers not being sent\n5. **Network connectivity**: Port blocked, firewall, routing issue\n6. **Request payload issue**: JSON structure doesn't match API contract","design":"**Investigation Steps**:\n\n1. **Verify service is running**:\n   ```bash\n   # Check if service is up\n   ps aux | grep benz_sent_filter\n   # Or check systemd/docker\n   systemctl status benz_sent_filter  # if systemd\n   docker ps | grep benz_sent_filter  # if docker\n   ```\n\n2. **Check service logs**:\n   ```bash\n   # Look for incoming requests from benz_analyzer\n   # Check for errors around 2025-11-22 18:54 (broken run time)\n   tail -f /path/to/benz_sent_filter/logs/*.log\n   # Or journalctl if systemd\n   journalctl -u benz_sent_filter --since \"2025-11-22 18:00\"\n   ```\n\n3. **Test endpoints manually**:\n   ```bash\n   # Test /classify endpoint\n   curl -X POST http://localhost:PORT/classify \\\n     -H \"Content-Type: application/json\" \\\n     -d '{\"headline\": \"Test headline\"}'\n   \n   # Test /routine-operations endpoint  \n   curl -X POST http://localhost:PORT/routine-operations \\\n     -H \"Content-Type: application/json\" \\\n     -d '{\"headline\": \"Test headline\", \"ticker_symbols\": [\"AAPL\"]}'\n   ```\n\n4. **Check benz_analyzer configuration**:\n   ```bash\n   cd /Users/jyaunches/Development/benzbout/benz_analyzer\n   # What URL is benz_analyzer using?\n   grep -r \"HEADLINE_CLASSIFIER\" .env* src/\n   # Check HeadlineClassificationClient initialization\n   grep -A 10 \"HeadlineClassificationClient\" src/analyzer_core/api.py\n   ```\n\n5. **Compare request payloads**:\n   - Enable debug logging in benz_analyzer's `HeadlineClassificationClient`\n   - Capture actual HTTP request being sent\n   - Compare to expected API contract in benz_sent_filter\n\n6. **Network connectivity test**:\n   ```bash\n   # From benz_analyzer host, test connectivity\n   nc -zv localhost PORT  # or whatever host:port benz_sent_filter uses\n   ```\n\n**Expected Findings**:\nOne of these should be true:\n- Service is not running (ps shows nothing)\n- Service logs show no incoming requests (not receiving calls)\n- Service logs show errors parsing requests (malformed JSON)\n- Wrong URL/port configured in benz_analyzer\n- API contract mismatch between client and server","acceptance_criteria":"- Identify why API endpoints are timing out (service down, wrong URL, malformed requests, etc.)\n- Fix root cause (start service, fix configuration, fix request format, etc.)\n- Verify `/classify` endpoint responds successfully within \u003c1s\n- Verify `/routine-operations` endpoint responds successfully within \u003c1s\n- Re-run benz_analyzer evaluation shows \u003c1s execution times for opinion_filter and routine_operation_filter\n- per_ticker_responses populated with actual data (not empty)\n- temporal_category returns real classifications (not \"unknown\")\n- Evaluation accuracy restored to ≥50%","notes":"**Test Script Available**: `test_filter_pipeline_sequence.sh`\n\nA bash script has been created that simulates the exact sequence of API calls made by benz_analyzer's filter pipeline to benz_sent_filter.\n\n**Location**: `/Users/jyaunches/Development/benzbout/benz_sent_filter/test_filter_pipeline_sequence.sh`\n\n**What it does**:\n1. Makes API calls in the exact order benz_analyzer's filter pipeline executes\n2. Uses a real test article from IMPL-025 (SATS/T spectrum sale)\n3. Shows request payload and response for each endpoint\n4. Displays key fields and decision logic\n5. Provides summary of filter results and pipeline decision\n\n**API Calls Simulated** (in order):\n1. **POST /classify** (OpinionFilter) - Opinion and temporal classification\n2. **POST /routine-operations** (RoutineOperationFilter) - Per-ticker routine detection\n3. **POST /detect-quantitative-catalyst** (QuantitativeCatalystFilter) - Quantitative catalyst detection\n4. **POST /detect-strategic-catalyst** (StrategicCatalystFilter) - Strategic catalyst detection\n\n**Usage**:\n```bash\ncd /Users/jyaunches/Development/benzbout/benz_sent_filter\n\n# Default (localhost:8002)\n./test_filter_pipeline_sequence.sh\n\n# Custom URL\nBENZ_SENT_FILTER_URL=http://localhost:8002 ./test_filter_pipeline_sequence.sh\n```\n\n**Requirements**:\n- benz_sent_filter service running\n- `jq` installed for JSON parsing\n- `curl` for HTTP requests\n\n**What to look for**:\n- All responses should return within \u003c1 second (not timing out at 5s)\n- `/classify` should return is_opinion, temporal_category, far_future_forecast\n- `/routine-operations` should return per-ticker routine_operation results\n- `/detect-quantitative-catalyst` should detect $23B in headline\n- `/detect-strategic-catalyst` should detect M\u0026A transaction\n\nIf any endpoint times out or returns empty data, that's the root cause of the regression.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-11-22T20:47:48.599448-05:00","updated_at":"2025-11-22T20:53:09.15069-05:00"}
{"id":"benz_sent_filter-c3b6","content_hash":"6178ef97240912e09ea10885c45cd28a961e4116d20c79ae60d614e606a8d4be","title":"Phase 1: Core Service Method for Multi-Ticker Classification","description":"Implement core service logic that separates one-time classification from per-ticker routine operations analysis. Service layer only, no API exposure.\n\nKey Work:\n- Add classify_headline_multi_ticker() method to ClassificationService\n- Extract core classification logic to run once\n- Loop through ticker symbols, call _analyze_routine_operation() for each\n- Return structured data with core classification + per-ticker results\n\nTests:\n- Update tests/test_classifier.py with 6 new test methods\n- Mock MNLS pipeline to verify number of inference calls","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-18T15:29:49.486879-05:00","updated_at":"2025-11-18T15:36:11.644666-05:00","closed_at":"2025-11-18T15:36:11.644666-05:00"}
{"id":"benz_sent_filter-c78c","content_hash":"1aea52c3d19417dc179d3bf517c62c9e297480b70c6b6f34480d7d38232af9cb","title":"Phase 5: Integration Testing \u0026 Validation","description":"End-to-end testing with real-world headlines and validation against bead requirements","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T18:08:55.96624-05:00","updated_at":"2025-11-17T18:18:51.428109-05:00","closed_at":"2025-11-17T18:18:51.428109-05:00","dependencies":[{"issue_id":"benz_sent_filter-c78c","depends_on_id":"benz_sent_filter-2cc1","type":"blocks","created_at":"2025-11-17T18:09:04.242208-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-c8a1","content_hash":"0108526ef872354ee0236094439c0b1d60c50e3ec92023cdbc3dc7a1eb073d7c","title":"Add logging to QuantitativeCatalystDetectorMNLS","description":"quantitative_catalyst_detector_mnls.py (299 lines) has ZERO logging. Add logging for: detection pipeline execution, type classification results, value extraction steps, confidence scores, final detection results.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T19:17:18.075326-05:00","updated_at":"2025-12-11T19:17:18.075326-05:00","labels":["business-logic","critical-gap","logging"]}
{"id":"benz_sent_filter-d32b","content_hash":"7a1793fdb6aec098c17aa31b1b22ae5242cef6042cd409eebf22aa1d2da338b1","title":"Validation - check-work","description":"Run /feature_wf:check-work to verify all acceptance criteria met and tests pass.\n\nValidates:\n- All phase acceptance criteria checked\n- Unit tests pass with coverage\n- Integration tests pass\n- No regressions in existing functionality\n- Documentation complete and accurate","status":"open","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-18T15:29:50.9763-05:00","updated_at":"2025-11-18T15:29:50.9763-05:00","dependencies":[{"issue_id":"benz_sent_filter-d32b","depends_on_id":"benz_sent_filter-f7d2","type":"blocks","created_at":"2025-11-18T15:30:02.160021-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-d439","content_hash":"677ebc023e8a06ddf5665fee97ae87297ff7a9eac37817e2055a53629752f3ff","title":"Phase 2: Add conditional language detection to forecast_analyzer","description":"Extend forecast_analyzer.py with matches_conditional_language() to detect near-term vague future language (\"plans to\", \"expected to\", \"could\", \"may\", \"exploring\", \"considering\"). Integrate into ClassificationService to populate conditional_language and conditional_patterns fields in ClassificationResult. Update /classify endpoint response model.","acceptance_criteria":"- matches_conditional_language(text) function implemented in forecast_analyzer.py\n- Detects patterns: \"plans to\", \"expected to\", \"aims to\", \"intends to\", \"could\", \"may\", \"might\", \"exploring\", \"considering\", \"evaluating\"\n- Returns tuple[bool, list[str]] with detection result and matched patterns\n- ClassificationResult model updated with conditional_language and conditional_patterns fields\n- _analyze_conditional_language() method added to ClassificationService\n- /classify endpoint returns conditional_language and conditional_patterns when detected\n- All unit tests pass (10 new tests for pattern matching)\n- All integration tests pass (5 new tests for /classify endpoint)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-19T21:26:56.431283-05:00","updated_at":"2025-11-19T21:26:56.431283-05:00","external_ref":"IMPL-013"}
{"id":"benz_sent_filter-d552","content_hash":"7d77cac582eeb0649e708f57c4852d7ce8699861fb2ca954b9e9f0bd7e598a0b","title":"Add inference logging to ClassificationService","description":"All classification methods have ZERO logging. Add to classify_headline(), classify_headline_multi_ticker(), classify_batch(): request logging (headline length, company param), inference completion with confidence scores, processing time per classification, error handling with full context.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-11T19:17:17.578759-05:00","updated_at":"2025-12-11T19:17:17.578759-05:00","labels":["critical-gap","logging","ml"]}
{"id":"benz_sent_filter-d687","content_hash":"ac1acbe9b9a06f8b0e862576380a62091f8d133d08a85ce26338f34c7ed69cf4","title":"Add title-based far-future event filter for revenue forecasts and multi-year projections","description":"Implement filter to detect articles with titles containing far-future language (revenue forecasts, multi-year projections, long-term estimates) and mark them as lower priority or NEUTRAL prediction candidates.\n\nContext from benz_evaluator false positive analysis:\n- TVGN article title contained \"Forecasts $1B Launch-Year Revenue, Sees $18B–$22B Over 5 Years\"\n- This triggered false positive because system reacted to impressive numbers without assessing timeline\n- Title itself contains clear signals: \"Forecasts\", \"Over 5 Years\", multi-billion projections\n- Market did not sustain movement because these are speculative long-term forecasts, not actual results\n\nPattern: Titles with \"forecasts\", \"projects\", \"estimates\", \"over X years\", \"5-year\", \"expects by 20XX\" indicate speculative future events rather than immediate financial impact.","design":"## Detection Logic\n\n### Title Pattern Matching\n\nDetect combinations of:\n1. **Forecast/Projection Language**: \"forecasts\", \"projects\", \"estimates\", \"expects\", \"targets\", \"guidance for\", \"outlook\"\n2. **Multi-Year Timeframes**: \"over X years\", \"5-year\", \"by 20XX\", \"through 20XX\", \"cumulative\"\n3. **Future Revenue Language**: \"launch-year revenue\", \"upon approval\", \"post-commercialization\"\n\n### Examples to Catch\n- \"Forecasts $1B Launch-Year Revenue, Sees $18B–$22B Over 5 Years\" ✓\n- \"Projects $500M Revenue By 2028\" ✓\n- \"Estimates 5-Year Cumulative Sales of $2B\" ✓\n- \"Guidance: Expects $100M Revenue Through 2027\" ✓\n\n### Examples to Pass Through\n- \"Reports Q2 Revenue of $1B\" (actual results)\n- \"Announces $500M Contract Win\" (immediate deal)\n- \"Q4 Guidance Raised to $100M\" (near-term guidance, \u003c1 year)\n\n## Filter Behavior\n\nWhen title matches far-future pattern:\n1. Add metadata flag: `far_future_forecast: true`\n2. Add filter reason: \"Title indicates long-term revenue forecast (\u003e1 year)\"\n3. Recommendation: Mark as NEUTRAL or reduce confidence by 70%\n\n## Implementation Notes\n\n- Regex-based detection in title analysis stage\n- Should run early in filter pipeline (before expensive API calls)\n- Consider threshold: Forecasts \u003e1 year out = far future\n- Edge case: Quarterly/annual guidance (\u003c1 year) should NOT trigger this filter","acceptance_criteria":"- Filter detects \"forecast + multi-year\" patterns in titles with 90%+ accuracy\n- TVGN-type articles (5-year forecasts) are flagged correctly\n- Near-term guidance (\u003c1 year) does NOT trigger filter\n- Filter adds appropriate metadata for downstream decision-making\n- Reduces false positives on speculative long-term forecasts by 60%+","status":"open","priority":2,"issue_type":"feature","assignee":"claude","created_at":"2025-11-17T14:33:17.381896-05:00","updated_at":"2025-11-17T14:33:17.381896-05:00"}
{"id":"benz_sent_filter-d8e1","content_hash":"7e5b907ca654f676bb59ffa5a5fadff41134db50ffbbcad20323f5ed6e894a38","title":"Validation - check-work","description":"Run tests and validate acceptance criteria for all phases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T21:50:39.087536-05:00","updated_at":"2025-11-16T22:05:32.708678-05:00","closed_at":"2025-11-16T22:05:32.708678-05:00","dependencies":[{"issue_id":"benz_sent_filter-d8e1","depends_on_id":"benz_sent_filter-f8e8","type":"blocks","created_at":"2025-11-16T21:50:50.570146-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-dbd4","content_hash":"60e76e7fb63420f3306d89b64497a966e0a33b0b73c097d548d84f3c9096b91a","title":"Phase 2: Data Models","description":"Define Pydantic models for API request/response schemas","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T21:50:38.086517-05:00","updated_at":"2025-11-16T21:55:15.087464-05:00","closed_at":"2025-11-16T21:55:15.087464-05:00","dependencies":[{"issue_id":"benz_sent_filter-dbd4","depends_on_id":"benz_sent_filter-de3f","type":"blocks","created_at":"2025-11-16T21:50:49.91259-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-de3f","content_hash":"b4e78e01670ffb8ff05753a7d1e45af313a617fc2b3761bcae7b2ce08a0855b3","title":"Phase 1: Dependencies \u0026 Configuration","description":"Add ML dependencies and create configuration module","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T21:50:37.898878-05:00","updated_at":"2025-11-16T21:52:53.85838-05:00","closed_at":"2025-11-16T21:52:53.85838-05:00"}
{"id":"benz_sent_filter-dfd1","content_hash":"7dfaa92cd45f75bfd59fa4d2d7e3c3a1e8dcc69abb800222d9e7a1dc1abdee03","title":"Phase 3: API Endpoint for Multi-Ticker Routine Operations","description":"Add new REST API endpoint that exposes multi-ticker routine operations functionality.\n\nKey Work:\n- Create POST /classify/routine-operations/multi-ticker endpoint\n- Define request model with headline and ticker_symbols\n- Call classify_headline_multi_ticker() service method\n- Return MultiTickerRoutineResponse model\n- Add OpenAPI documentation with examples\n\nTests:\n- Update tests/test_routes.py with 7 new test methods\n- Test valid requests, error handling, schema validation","status":"in_progress","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-18T15:29:50.036396-05:00","updated_at":"2025-11-18T15:38:32.831865-05:00","dependencies":[{"issue_id":"benz_sent_filter-dfd1","depends_on_id":"benz_sent_filter-375e","type":"blocks","created_at":"2025-11-18T15:30:01.531932-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-e3be","content_hash":"081f04243d8f3c2da889fd5c3618679708d9d885fa60695f5f7b38f50436c754","title":"Phase 4: Integration Testing and Validation","description":"End-to-end integration testing through /classify endpoint with real-world headline examples covering all pattern categories","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:51:17.49431-05:00","updated_at":"2025-11-19T22:24:28.318012-05:00","closed_at":"2025-11-19T22:24:28.318012-05:00","external_ref":"specs/2025-11-19_21-30_conditional_language_detection.md","dependencies":[{"issue_id":"benz_sent_filter-e3be","depends_on_id":"benz_sent_filter-94ed","type":"blocks","created_at":"2025-11-19T21:51:25.939932-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-e921","content_hash":"b210d139d316077af9b94314c45f0abd9d453e9b018847be9ac6a1ae36244fee","title":"Phase 2: MNLI Type Classification","description":"Add multi-label MNLI classification to determine catalyst type (dividend, acquisition, buyback, earnings, guidance). Extends Phase 1 detector with semantic type identification.","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-19T15:24:13.825936-05:00","updated_at":"2025-11-19T15:43:30.512173-05:00","closed_at":"2025-11-19T15:43:30.512173-05:00","dependencies":[{"issue_id":"benz_sent_filter-e921","depends_on_id":"benz_sent_filter-0e52","type":"blocks","created_at":"2025-11-19T15:24:23.906154-05:00","created_by":"jyaunches"},{"issue_id":"benz_sent_filter-e921","depends_on_id":"benz_sent_filter-b258","type":"parent-child","created_at":"2025-11-19T15:24:36.409113-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-ec0d","content_hash":"abe525c189036de92780954f4719014a26bbfaada0cb083e342ae4facc6327c4","title":"Phase 1: Core Pattern Detection Function","description":"Implement matches_conditional_language() function in forecast_analyzer.py with precompiled regex patterns for detecting conditional language (plans to, expected to, could, may, exploring, etc.)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:51:17.051484-05:00","updated_at":"2025-11-19T21:54:33.245687-05:00","closed_at":"2025-11-19T21:54:33.245687-05:00","external_ref":"specs/2025-11-19_21-30_conditional_language_detection.md"}
{"id":"benz_sent_filter-edb5","content_hash":"7fe7c3f0ff9850fdd3e18cf2fa9ab70868f5def02ad05740870464071f3084b0","title":"Strategic catalyst classification accuracy issues - wrong types, invalid subtypes, and detection misses","description":"## Bug Report\n\n**Severity**: HIGH - Classification accuracy impacting strategic catalyst effectiveness\n\n**Depends on**: benz_sent_filter-225c (catalyst_subtype null issue - FIXED)\n\n## Problem\n\nAfter fixing the null subtype issue, evaluation reveals multiple classification accuracy problems:\n1. **Quantitative catalysts misclassified as strategic** (wrong filter should handle them)\n2. **Invalid subtype returned** (\"mixed\" not in taxonomy)\n3. **Strategic catalysts not detected** (false negatives)\n\n## Evidence from Evaluation Run\n\nRun ID: `2025-11-21_10-37_RUN_IMPL-016-TEST_during_move_pattern_failures`\n\n### Issue 1: Quantitative Catalysts Misclassified as Strategic\n\n**WOW** - $1.5B Acquisition Deal:\n```\nTitle: \"WOW! Stock Rockets Nearly 48% After-Hours As DigitalBridge, Crestview Strike $1.5 Billion Deal...\"\nDetection: has_strategic_catalyst=true, catalyst_subtype=\"product_launch\" ❌\nExpected: Should be QUANTITATIVE (has dollar amount), not strategic\n```\n\n**WDAY** - Earnings Report:\n```\nTitle: (Earnings-related headline)\nDetection: has_strategic_catalyst=true, catalyst_subtype=\"partnership\" ❌\nExpected: Should be QUANTITATIVE (earnings), not strategic\n```\n\n**Impact**: These cases should be handled by QuantitativeCatalystFilter (IMPL-016), not StrategicCatalystFilter. Misclassification causes wrong recipe selection and prompt guidance.\n\n### Issue 2: Invalid Subtype \"mixed\"\n\n**OPEN** - CEO Transition:\n```\nTitle: \"Opendoor Announces CEO Carrie Wheeler Will Step Down And Appoints Shrisha Radhakrishna...\"\nDetection: has_strategic_catalyst=true, catalyst_subtype=\"mixed\" ❌\nExpected: catalyst_subtype=\"executive_changes\"\n```\n\n**Problem**: \"mixed\" is NOT in the defined taxonomy:\n- ✅ Valid subtypes: executive_changes, product_launch, partnership, m\u0026a, clinical_trial, corporate_restructuring\n- ❌ Invalid subtype: \"mixed\"\n\n**Impact**: benz_analyzer recipe selection may not handle \"mixed\" correctly (not mapped to PatternType enum).\n\n### Issue 3: Strategic Catalysts Not Detected (False Negatives)\n\n**CTXR** - Product Launch with Concrete Milestone:\n```\nTitle: \"Citius Pharmaceuticals Announces AI Platform Deployment Ahead of LYMPHIR Launch\"\nDetection: has_strategic_catalyst=false ❌\nExpected: has_strategic_catalyst=true, catalyst_subtype=\"product_launch\"\nContext: This was our ONLY success case in original research - concrete milestone (LYMPHIR launch)\n```\n\n**MURA** - Product Launch:\n```\nTitle: (Product launch announcement)\nDetection: has_strategic_catalyst=false ❌\nExpected: has_strategic_catalyst=true, catalyst_subtype=\"product_launch\"\n```\n\n**Impact**: Missing strategic catalysts = system falls back to pattern recipes with \"sell the fact\" warnings.\n\n## Root Cause Hypotheses\n\n### Hypothesis 1: Quantitative vs Strategic Confusion\n- Detection model may not distinguish between \"M\u0026A with deal price\" (quantitative) vs \"M\u0026A without deal price\" (strategic)\n- May be detecting \"earnings\" keywords but not recognizing it as quantitative event\n- **Fix**: Add explicit quantitative filter before strategic detection (check for dollar amounts, percentages, share prices)\n\n### Hypothesis 2: \"mixed\" Subtype Creation\n- Model may return \"mixed\" when multiple catalyst types detected (e.g., executive change + partnership)\n- Not handling multi-catalyst scenarios correctly\n- **Fix**: Return PRIMARY catalyst type, or add logic to select dominant catalyst\n\n### Hypothesis 3: Detection Threshold Too High\n- CTXR and MURA confidence may be below detection threshold\n- Model may require more explicit product launch keywords\n- **Fix**: Lower confidence threshold or improve model training on product launches\n\n## Expected Behavior\n\n### Quantitative Catalyst Handling\n```python\n# Before strategic catalyst detection\nif has_dollar_amount or has_percentage or has_share_price:\n    # Route to quantitative catalyst detection\n    return {\n        \"has_strategic_catalyst\": false,  # Let quantitative filter handle it\n        \"catalyst_subtype\": null,\n        \"confidence\": 0.0\n    }\n```\n\n### Valid Subtype Enforcement\n```python\nVALID_SUBTYPES = [\n    \"executive_changes\",\n    \"product_launch\", \n    \"partnership\",\n    \"m\u0026a\",\n    \"clinical_trial\",\n    \"corporate_restructuring\"\n]\n\nif detected_subtype not in VALID_SUBTYPES:\n    # Log warning and map to closest valid subtype\n    # Or return null if uncertain\n```\n\n### Detection Accuracy Targets\n- Precision: \u003e90% (minimize wrong classifications)\n- Recall: \u003e85% (detect most strategic catalysts)\n- False positives on quantitative: \u003c5%\n\n## Test Cases\n\n### Test 1: Quantitative Should Not Trigger Strategic\n- WOW headline with \"$1.5 Billion\" → should return `has_strategic_catalyst=false`\n- WDAY earnings headline → should return `has_strategic_catalyst=false`\n\n### Test 2: Valid Subtypes Only\n- OPEN CEO transition → should return `catalyst_subtype=\"executive_changes\"` (not \"mixed\")\n- If multiple catalysts detected, return PRIMARY type\n\n### Test 3: Product Launch Detection\n- CTXR \"AI Platform Deployment Ahead of LYMPHIR Launch\" → should return `has_strategic_catalyst=true, catalyst_subtype=\"product_launch\"`\n- MURA product launch → should return `has_strategic_catalyst=true, catalyst_subtype=\"product_launch\"`\n\n## Acceptance Criteria\n\n- [ ] Quantitative catalysts (dollar amounts, earnings) NOT detected as strategic\n- [ ] \"mixed\" subtype never returned - always return valid taxonomy subtype\n- [ ] CTXR product launch detected (has_strategic_catalyst=true)\n- [ ] MURA product launch detected (has_strategic_catalyst=true)\n- [ ] Re-run IMPL-016-TEST shows improved detection accuracy\n- [ ] Classification accuracy metrics: Precision \u003e90%, Recall \u003e85%\n- [ ] Add unit tests for edge cases (quantitative vs strategic, multi-catalyst headlines)","notes":"## Latest Evaluation Results (2025-11-21_11-55)\n\n**CRITICAL**: Fix attempt made situation WORSE - all strategic catalysts now classified as \"product_launch\"\n\n### Evidence:\n- WKHS (M\u0026A merger) → \"product_launch\" ❌\n- SHCO (Executive changes) → \"product_launch\" ❌  \n- OPEN (CEO transition) → \"product_launch\" ❌\n- WDAY (Earnings) → \"product_launch\" ❌\n- IMG (Partnership) → \"product_launch\" ❌\n\n### Impact:\n- Recipe selection working (strategic_catalyst recipe used) ✅\n- Pattern warnings removed from prompts ✅\n- BUT wrong subtype guidance applied (M\u0026A getting product launch guidance) ❌\n- Result: 5/5 strategic catalyst cases predict NEUTRAL or wrong direction (0% success)\n\n### Additionally:\n- 6 strategic catalysts NOT detected at all (NEHC, SMX, CTXR, PSTV, XFOR)\n- Fell back to pattern recipes (sell_the_fact)\n\n### Accuracy Impact:\n- Previous run: 81.2% accuracy, 7 True Neutrals\n- Current run: 76.5% accuracy, 11 True Neutrals\n- **Got 5% worse** after fix attempt\n\n**Action Needed**: Revert or fix the classification model - \"product_launch\" should not be default for all catalyst types.","status":"open","priority":2,"issue_type":"bug","assignee":"claude","created_at":"2025-11-21T10:45:14.712489-05:00","updated_at":"2025-11-21T11:59:37.325192-05:00","dependencies":[{"issue_id":"benz_sent_filter-edb5","depends_on_id":"benz_sent_filter-225c","type":"blocks","created_at":"2025-11-21T10:45:14.718961-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-f7d2","content_hash":"7a7d0d40536ac9f7d6ac73f846bb68f96060f7f881977d757c1bd62628f43529","title":"Phase 5: Documentation and API Examples","description":"Update all documentation to include new multi-ticker endpoint with usage examples.\n\nKey Work:\n- Update CLAUDE.md with multi-ticker endpoint documentation\n- Create/update API examples document with curl and Python examples\n- Update README with new endpoint\n- Document performance characteristics from Phase 4 tests\n- Add troubleshooting section\n\nNo unit tests - documentation validation only.","status":"open","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-18T15:29:50.685252-05:00","updated_at":"2025-11-18T15:29:50.685252-05:00","dependencies":[{"issue_id":"benz_sent_filter-f7d2","depends_on_id":"benz_sent_filter-a645","type":"blocks","created_at":"2025-11-18T15:30:01.882008-05:00","created_by":"jyaunches"}]}
{"id":"benz_sent_filter-f82f","content_hash":"125494f8b1b6799ff79685417d5912b91ef4f42fe7b85f680735248f904e77c3","title":"Quantitative Catalyst Detection API (IMPL-016 Part 1)","description":"Create new /detect-quantitative-catalyst endpoint that identifies whether article headline announces a specific, quantitative financial catalyst (dividend amount, acquisition price, buyback size). This provides benz_analyzer with structured detection to support IMPL-016 \"already priced in\" pattern suppression.","design":"## Context from benz_evaluator\n\n**IMPL-016 Goal**: Suppress \"already priced in\" technical patterns when fresh quantitative catalysts are present\n\n**Problem**: System dismisses quantitative catalysts (special dividends, M\u0026A prices, buybacks) based on technical patterns alone\n\n**benz_sent_filter Responsibility**: Detect whether headline contains quantitative financial catalyst\n**benz_analyzer Responsibility**: Use detection result to suppress \"already priced in\" logic in prompts\n\n## Endpoint Design: /detect-quantitative-catalyst\n\n### Request Model\n\n```python\nclass QuantitativeCatalystRequest(BaseModel):\n    \"\"\"Request model for quantitative catalyst detection.\"\"\"\n    \n    headline: str = Field(..., min_length=1, description=\"Article headline to analyze\")\n```\n\n### Response Model\n\n```python\nclass QuantitativeCatalystResult(BaseModel):\n    \"\"\"Result model for quantitative catalyst detection.\"\"\"\n    \n    headline: str = Field(..., description=\"Original headline text\")\n    \n    # Detection result\n    has_quantitative_catalyst: bool = Field(\n        ..., \n        description=\"Whether headline announces a specific, quantitative financial catalyst\"\n    )\n    \n    # Catalyst details\n    catalyst_type: str | None = Field(\n        default=None,\n        description=\"Type of catalyst detected: 'dividend', 'acquisition', 'buyback', 'earnings_beat', 'revenue_guidance', 'mixed'\"\n    )\n    \n    catalyst_values: list[str] = Field(\n        default_factory=list,\n        description=\"Extracted quantitative values (e.g., ['$1', '$3.5B', '$37.50/share', '10%'])\"\n    )\n    \n    confidence: float = Field(\n        ..., \n        description=\"Confidence in detection (0.0 to 1.0)\"\n    )\n```\n\n### Detection Logic\n\n**Detector Location**: `src/benz_sent_filter/services/quantitative_catalyst_detector.py` (new)\n\n**Pattern Categories**:\n\n1. **Dollar Amounts**:\n   - Pattern: `r'\\$[0-9,.]+[BMK]?\\b'` (matches: $1, $3.5B, $75M, $1.9B)\n   - Context required: Must be associated with financial action verb\n\n2. **Per-Share Prices**:\n   - Pattern: `r'\\$[0-9,.]+\\s*(?:per|/)\\s*share\\b'` (matches: $37.50/share, $10 per share)\n   - Common in M\u0026A announcements\n\n3. **Percentages**:\n   - Pattern: `r'\\b[0-9,.]+%\\b'` (matches: 10%, 2.5%, 15.3%)\n   - Context required: Associated with financial metric\n\n**Catalyst Type Classification**:\n\n```python\nCATALYST_PATTERNS = {\n    \"dividend\": [\n        r'\\b(declares?|announces?|pays?|distributes?)\\b.*\\$([\\d,.]+).*\\b(dividend|distribution)\\b',\n        r'\\b(dividend|distribution)\\b.*\\$([\\d,.]+)',\n        r'\\b(special|quarterly|annual)\\s+(dividend|distribution)\\b.*\\$([\\d,.]+)'\n    ],\n    \"acquisition\": [\n        r'\\b(acquire|acquires?|acquir(ing|ed)|purchase|purchases?|buy|buys?|buying|bought)\\b.*\\$([\\d,.]+[BMK]?)',\n        r'\\$([\\d,.]+[BMK]?).*\\b(acquisition|deal|transaction|merger)\\b',\n        r'\\$([\\d,.]+)\\s*(per|/)\\s*share'\n    ],\n    \"buyback\": [\n        r'\\b(repurchase|buyback|buy\\s*back)\\b.*\\$([\\d,.]+[BMK]?)',\n        r'\\b(authorizes?|approves?)\\b.*\\brepurchase\\b.*\\$([\\d,.]+[BMK]?)',\n        r'\\$([\\d,.]+[BMK]?).*\\b(share\\s*repurchase|buyback)\\b'\n    ],\n    \"earnings_beat\": [\n        r'\\b(beats?|tops?|exceeds?)\\b.*\\b(earnings|EPS|profit)\\b.*\\$([\\d,.]+)',\n        r'\\b(earnings|EPS)\\b.*\\$([\\d,.]+).*\\b(beats?|vs\\.?\\s*\\$[\\d,.]+)\\b'\n    ],\n    \"revenue_guidance\": [\n        r'\\b(revenue|sales)\\b.*\\$([\\d,.]+[BMK]?)',\n        r'\\b(raises?|increases?|boosts?)\\b.*\\b(guidance|outlook|forecast)\\b.*\\$([\\d,.]+[BMK]?)'\n    ]\n}\n```\n\n**Detection Algorithm**:\n\n```python\ndef detect_quantitative_catalyst(headline: str) -\u003e QuantitativeCatalystResult:\n    \"\"\"\n    Detect quantitative financial catalyst in headline.\n    \n    Steps:\n    1. Extract all dollar amounts, per-share prices, and percentages\n    2. If no values found → has_quantitative_catalyst = False\n    3. If values found, classify catalyst type using patterns\n    4. Calculate confidence based on:\n       - Pattern match strength (0.9 for strong verb+value, 0.7 for value alone)\n       - Number of values extracted (multiple values = higher confidence)\n       - Catalyst type clarity (specific type = higher confidence)\n    \n    Returns:\n        QuantitativeCatalystResult with detection details\n    \"\"\"\n    catalyst_values = []\n    catalyst_type = None\n    confidence = 0.0\n    \n    # Extract dollar amounts\n    dollar_matches = re.findall(r'\\$[0-9,.]+[BMK]?\\b', headline, re.IGNORECASE)\n    catalyst_values.extend(dollar_matches)\n    \n    # Extract per-share prices\n    share_price_matches = re.findall(r'\\$[0-9,.]+\\s*(?:per|/)\\s*share\\b', headline, re.IGNORECASE)\n    catalyst_values.extend(share_price_matches)\n    \n    # Extract percentages (only if associated with financial terms)\n    if re.search(r'\\b(dividend|yield|growth|return|margin|beat|miss)\\b', headline, re.IGNORECASE):\n        pct_matches = re.findall(r'\\b[0-9,.]+%\\b', headline)\n        catalyst_values.extend(pct_matches)\n    \n    # If no values found, return negative result\n    if not catalyst_values:\n        return QuantitativeCatalystResult(\n            headline=headline,\n            has_quantitative_catalyst=False,\n            catalyst_type=None,\n            catalyst_values=[],\n            confidence=0.0\n        )\n    \n    # Classify catalyst type\n    for cat_type, patterns in CATALYST_PATTERNS.items():\n        for pattern in patterns:\n            if re.search(pattern, headline, re.IGNORECASE):\n                catalyst_type = cat_type\n                confidence = 0.9  # Strong match (verb + value)\n                break\n        if catalyst_type:\n            break\n    \n    # If no specific type matched, generic \"quantitative\" catalyst\n    if not catalyst_type:\n        catalyst_type = \"mixed\"\n        confidence = 0.7  # Weaker match (value without clear context)\n    \n    # Boost confidence if multiple values (likely material announcement)\n    if len(catalyst_values) \u003e 1:\n        confidence = min(confidence + 0.1, 1.0)\n    \n    return QuantitativeCatalystResult(\n        headline=headline,\n        has_quantitative_catalyst=True,\n        catalyst_type=catalyst_type,\n        catalyst_values=catalyst_values,\n        confidence=confidence\n    )\n```\n\n### Implementation Files\n\n1. **Service**: `src/benz_sent_filter/services/quantitative_catalyst_detector.py`\n   - Pattern compilation\n   - Value extraction\n   - Catalyst type classification\n\n2. **Models**: `src/benz_sent_filter/models/classification.py`\n   - Add `QuantitativeCatalystRequest`\n   - Add `QuantitativeCatalystResult`\n\n3. **API**: `src/benz_sent_filter/api/app.py`\n   - Add `/detect-quantitative-catalyst` POST endpoint\n   - Route to detector service\n\n4. **Tests**: `tests/test_quantitative_catalyst_detector.py`\n   - Test value extraction\n   - Test catalyst type classification\n   - Test confidence scoring\n   - Test with real headlines from False Neutral cases\n\n### Edge Cases\n\n1. **Multiple values**: \"$3.5B, Or $37.50/Share\"\n   - Extract both values\n   - Boost confidence\n   - Type: \"acquisition\"\n\n2. **Percentage without context**: \"Stock up 10%\"\n   - Do NOT extract (not a catalyst, just price movement)\n   - Only extract percentages near financial terms\n\n3. **Vague amounts**: \"Multi-million dollar deal\"\n   - No specific value extracted\n   - has_quantitative_catalyst = False\n\n4. **Mixed catalyst**: \"Beats earnings, raises dividend to $1\"\n   - Type: \"mixed\" (or prioritize first match)\n   - Extract all values","acceptance_criteria":"1. New endpoint /detect-quantitative-catalyst accepts headline text\n2. Detector extracts dollar amounts with 95%+ accuracy on test cases\n3. Detector extracts per-share prices with 95%+ accuracy\n4. Detector classifies catalyst types (dividend, acquisition, buyback) correctly 90%+ of time\n5. Confidence scoring ranges 0.0-1.0 with appropriate thresholds (0.9 for strong match, 0.7 for weak)\n6. Response includes catalyst_type and catalyst_values for downstream use\n7. UUU case returns has_quantitative_catalyst=True, type=\"dividend\", values=[\"$1\"]\n8. AHL case returns has_quantitative_catalyst=True, type=\"acquisition\", values=[\"$3.5B\", \"$37.50/share\"]\n9. RSKD case returns has_quantitative_catalyst=True, type=\"buyback\", values=[\"$75M\"]\n10. API endpoint follows existing benz_sent_filter patterns (POST, Pydantic models, FastAPI)","notes":"## Test Cases with Full Article Titles\n\n### Case 1: UUU - Special Dividend\n**Article ID**: benzinga_47444642_UUU\n**Full Title**: \"Universal Safety Declares $1 Special Dividend After Feit Electric Asset Sale, Stock to Trade With Due Bills\"\n**Expected Result**:\n- has_quantitative_catalyst: True\n- catalyst_type: \"dividend\"\n- catalyst_values: [\"$1\"]\n- confidence: 0.9 (strong match: \"Declares...Dividend\")\n\n### Case 2: AHL - M\u0026A Acquisition\n**Article ID**: benzinga_47354784_AHL\n**Full Title**: \"Sompo To Acquire Aspen For $3.5B, Or $37.50/Share And Redeem All Class A Shares\"\n**Expected Result**:\n- has_quantitative_catalyst: True\n- catalyst_type: \"acquisition\"\n- catalyst_values: [\"$3.5B\", \"$37.50/Share\"]\n- confidence: 1.0 (strong match + multiple values: \"To Acquire For $3.5B\")\n\n### Case 3: RSKD - Buyback Authorization\n**Article ID**: benzinga_47181321_RSKD\n**Full Title**: \"Riskified Board Authorizes Repurchase Of Up To $75M Of Its Class A Ordinary Shares\"\n**Expected Result**:\n- has_quantitative_catalyst: True\n- catalyst_type: \"buyback\"\n- catalyst_values: [\"$75M\"]\n- confidence: 0.9 (strong match: \"Authorizes Repurchase...Of $75M\")\n\n### Negative Test Case\n**Title**: \"Company Updates Strategic Outlook\"\n**Expected Result**:\n- has_quantitative_catalyst: False\n- catalyst_type: None\n- catalyst_values: []\n- confidence: 0.0","status":"open","priority":1,"issue_type":"feature","assignee":"Claude","created_at":"2025-11-19T08:27:33.576911-05:00","updated_at":"2025-11-19T08:54:56.82841-05:00"}
{"id":"benz_sent_filter-f8e8","content_hash":"c630ef590fbdc071f4e96ad0228f4ed42d0ad8320ac62063b35109f23f53f302","title":"Phase 6: Documentation \u0026 Examples","description":"Update documentation with API usage examples and deployment instructions","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-16T21:50:38.886269-05:00","updated_at":"2025-11-16T22:05:14.923191-05:00","closed_at":"2025-11-16T22:05:14.923191-05:00","dependencies":[{"issue_id":"benz_sent_filter-f8e8","depends_on_id":"benz_sent_filter-3002","type":"blocks","created_at":"2025-11-16T21:50:50.395173-05:00","created_by":"jyaunches"}]}
